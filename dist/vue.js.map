{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compiler/index.js","../src/vdom/index.js","../src/vdom/patch.js","../src/utils/nextTick.js","../src/observe/schedular.js","../src/observe/watcher.js","../src/lifecycle.js","../src/init.js","../src/index.js"],"sourcesContent":["let oldArrayPrototype = Array.prototype;\r\n// arrayProptotype.__proto__ = Array.prototype;\r\n\r\nlet arrayPrototype = Object.create(oldArrayPrototype);\r\nlet methods = [\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'reverse',\r\n    'sort',\r\n    'splice'\r\n]\r\n// 重写数组 7 方法 （目的就是对新增的数据再次进行观测 避免里面出现没有监听到的对象数据）\r\n// 如 arr[1000] = 1234 更改数组会响应式是通过 $set 实现的\r\nmethods.forEach(method => { // 用户调用push方法会先经历我自己重写的方法,之后调用数组原来的方法\r\n    arrayPrototype[method] = function(...args) {\r\n        let inserted;\r\n        let ob = this.__ob__;\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args; // 数组\r\n                break;\r\n            case 'splice': // arr.splice(1,1,xxx)\r\n                inserted = args.slice(2); // 接去掉前两个参数\r\n            default:\r\n                break\r\n        }\r\n        if (inserted) {\r\n            // 对新增的数据再次进行观测\r\n            ob.observeArray(inserted)\r\n        }\r\n        let result = oldArrayPrototype[method].call(this, ...args)\r\n        ob.dep.notify()\r\n        return result\r\n    }\r\n})\r\nexport default arrayPrototype\r\n\r\n","let did = 0\r\n\r\n// 收集 watcher\r\nclass Dep {\r\n  constructor() {\r\n    this.id = did++\r\n    this.watchers = []\r\n  }\r\n  depend() { // watcher 和 dep 是一个多对多的关系\r\n    Dep.target.addDep(this) // 让 watcher 去记录 dep\r\n  }\r\n  addWatcher (watcher) {\r\n    this.watchers.push(watcher)\r\n  }\r\n  notify () {\r\n    this.watchers.forEach(watcher => watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null // 描述当前watcher是谁的\r\nexport default Dep","import arrayPrototype from \"./array\";\nimport Dep from \"./dep\";\n\nclass Observer {\n  constructor(data) {\n    // 如果是数组的话也是用defineProperty会浪费很多性能 很少用户会通过arr[878] = 123\n    // vue3中的polyfill 直接就给数组做代理了\n    // 改写数组的方法，如果用户调用了可以改写数组方法的api 那么我就去劫持这个方法\n    // 变异方法 push pop shift unshift reverse sort splice\n\n    this.dep = new Dep(); // 给所有的对象都增加一个dep, 后续我们会给对象增添新的属性也期望能实现更新\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false,\n    });\n    // 如果有__ob__属性 说明被观测过了\n    // 修改数组的索引和长度是无法更新视图的\n    if (Array.isArray(data)) {\n      // 需要重写这7个方法\n      data.__proto__ = arrayPrototype;\n      // 直接将属性赋值给这个对象\n      // 如果数组里面放的是对象类型 我期望他也会被变成响应式的\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n  observeArray(data) {\n    data.forEach((item) => observe(item)); //如果是对象我才进行观测了\n  }\n  walk(data) {\n    // 循环对象 尽量不用for in （会遍历原型链）\n    let keys = Object.keys(data); // [0,1,2]\n    keys.forEach((key) => {\n      //没有重写数组里的每一项\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    let temp = value[i];\n    temp.__ob__ && temp.__ob__.dep.depend(); // 让数组中的对象类型做依赖收集  [[[]]]\n    if (Array.isArray(temp)) {\n      dependArray(temp);\n    }\n  }\n}\n\n// 性能不好的原因在于 所有的属性都被重新定义了一遍\n// 一上来需要将对象深度代理 性能差\nfunction defineReactive(data, key, value) {\n  //  闭包\n  // 属性会全部被重写增加了get和set\n  let dep = new Dep();\n  let childOb = observe(value); // 递归代理属性\n  Object.defineProperty(data, key, {\n    get() {\n      // vm.xxx\n      if (Dep.target) {\n        dep.depend(); // 依赖收集 要将属性收集对应的 watcher\n        if (childOb) {\n          childOb.dep.depend(); // 让数组和对象也记录一下渲染 watcher\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value;\n    },\n    set(newValue) {\n      // vm.xxx = {a:1} 赋值一个对象的话 也可以实现响应式数据\n      if (newValue === value) return;\n      childOb = observe(newValue);\n      value = newValue;\n      dep.notify(); // 通知依赖的watcher去重新渲染\n    },\n  });\n}\nexport function observe(data) {\n  if (typeof data !== \"object\" || data == null) {\n    return; // 如果不是对象类型，那么不要做任何处理\n  }\n  if (data.__ob__) {\n    // 说明这个属性已经被代理过了\n    return data;\n  }\n\n  // 我稍后要区分 如果一个对象已经被观测了，就不要再次被观测了\n  // __ob__ 标识是否有被观测过\n\n  return new Observer(data);\n}\n\n// 每个类头有一个prototype 指向了一个公共的空间\n// 每个实例可以通过__proto__ 找到所属类的prototype对应的内容\n\n// 1.在Vue2中对象的响应式原理，就是给每个属性增加get和set，而且是递归操作 （用户在写代码的时候尽量不要把所有的属性都放在data中，层次尽可能不要太深）, 赋值一个新对象也会被变成响应式的\n// 2.数组没有使用defineProperty 采用的是函数劫持创造一个新的原型重写了这个原型的7个方法，用户在调用的时候采用的是这7个方法。我们增加了逻辑如果是新增的数据会再次被劫持 。 最终调用数组的原有方法 （注意数字的索引和长度没有被监控）  数组中对象类型会被进行响应式处理\n","import { observe } from \"./observe/index\";\r\n\r\nexport function initState(vm) {\r\n    const options = vm.$options\r\n\r\n    // 后续实现计算属性 、 watcher 、 props 、methods\r\n    if (options.data) {\r\n        initData(vm);\r\n    }\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[source][key]\r\n        },\r\n        set(newValue) {\r\n            vm[source][key] = newValue;\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n    // 如果是函数就拿到函数的返回值 否则就直接采用data作为数据源\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n\r\n    // 属性劫持 采用defineProperty将所有的属性进行劫持\r\n\r\n    // 我期望用户可以直接通过 vm.xxx 获取值， 也可以这样取值 vm._data.xxx\r\n    for (let key in data) {\r\n        proxy(vm, '_data', key)\r\n    }\r\n    observe(data)\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 用来描述标签的\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的  捕获的是结束标签的标签名\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的  分组1 拿到的是属性名  , 分组3 ，4， 5 拿到的是key对应的值\r\n\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的    />    >   \r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配双花括号中间单的内容\r\n\r\nfunction parserHTML(html) {\r\n  function advance(n) {\r\n    html = html.substring(n) // 每次根据传入的长度截取html\r\n    console.log(\"html 剩下\", html)\r\n  }\r\n\r\n  // 树的操作 ，需要根据开始标签和结束标签产生一个树\r\n  let root\r\n  // 如何创建树的父子关系\r\n  let stack = []\r\n\r\n  function createASTElement(tagName, attrs) {\r\n    return {\r\n      tag: tagName,\r\n      attrs,\r\n      children: [],\r\n      parent: null,\r\n      type: 1\r\n    }\r\n  }\r\n\r\n  // 开始标签进栈 （先进后出原理）\r\n  function start(tagName, attrs) {\r\n    let element = createASTElement(tagName, attrs)\r\n    if (root == null) {\r\n      root = element\r\n    }\r\n    let parent = stack[stack.length - 1] // 取到栈中的最后一个\r\n    if (parent) {\r\n      element.parent = parent       // 让这个元素记住自己的父亲是谁\r\n      parent.children.push(element) // 让父亲记住儿子是谁\r\n    }\r\n    stack.push(element) //入栈\r\n  }\r\n\r\n  // 结束标签出栈\r\n  function end(tagName) {\r\n    stack.pop() //出栈\r\n  }\r\n\r\n  // 处理标签内容\r\n  function chars(text) {\r\n    text = text.replace(/\\s/g, '')\r\n    if (text) {\r\n      let parent = stack[stack.length - 1]\r\n      parent.children.push({ // 增加一个子元素\r\n        type: 3, // 类型 3 表示文本\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  //  ast 描述的是语法本身 ，语法中没有的，不会被描述出来  虚拟dom 是描述真实dom的可以自己增添属性\r\n  while (html) {\r\n    // 1. 处理开始标签 （就是处理 <div id=\"app\">{{name}}</div>  的 <div id=\"app\"> 部分）\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag(); // 解析开始标签  {tagName:'div',attrs:[{name:\"id\",value:\"app\"}]}\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n\r\n      // 3. 处理结束标签 （就是处理 <div id=\"app\">{{name}}</div>  的 </div> 部分）\r\n      let matches\r\n      if (matches = html.match(endTag)) {\r\n        end(matches[1])\r\n        advance(matches[0].length)\r\n        continue\r\n      }\r\n    }\r\n\r\n    // 2. 处理标签内容 （就是处理 <div id=\"app\">{{name}}</div> 的 {{name}} 部分）\r\n    let text\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length) // html 删去 text， 处理一点删一点\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n\r\n  function parseStartTag() {\r\n    const matches = html.match(startTagOpen) // 获取标签头 <div id=\"app\">{{name}}</div> 的 <div 部分\r\n    if (matches) {\r\n      const match = {\r\n        tagName: matches[1],\r\n        attrs: []\r\n      }\r\n      advance(matches[0].length) // 删除html前面匹配到的标签名字符串\r\n      let end, attr\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        // while循环取属性 直到取完\r\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true })\r\n        advance(attr[0].length) // 取到一个属性删除一个\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  return root\r\n}\r\n\r\n// 参数拼接成对象\r\nfunction genProps(attrs) {\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i]\r\n    if (attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').reduce((memo, current) => {\r\n        let [key, value] = current.split(':')\r\n        memo[key] = value\r\n        return memo\r\n      }, obj)\r\n      attr.value = obj // 这里是样式对象 例：{color:red,background:blue}\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0,-1)}}` // 删除最后的 ,\r\n}\r\n\r\nfunction gen(node) {\r\n  if (node.type === 1) {  // 是节点\r\n    return genCode(node)\r\n  } else {\r\n    let text = node.text\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})` // 不带表达式的\r\n    } else {\r\n      let tokens = []\r\n      let match\r\n      // exec 遇到全局匹配会有 lastIndex 问题 每次匹配前需要将lastIndex 置为 0\r\n      let startIndex = defaultTagRE.lastIndex = 0\r\n      while (match = defaultTagRE.exec(text)) {\r\n        let endIndex = match.index // 匹配到索引\r\n        if (endIndex > startIndex) {\r\n          tokens.push(JSON.stringify(text.slice(startIndex, endIndex)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        startIndex = endIndex + match[0].length\r\n      }\r\n      if (startIndex < text.length) { // 最后的尾巴放进去\r\n        tokens.push(JSON.stringify(text.slice(startIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})` // 最后将动态数据 和非动态的拼接在一起\r\n    }\r\n  }\r\n}\r\n\r\nfunction genChildren(ast) {\r\n  const children = ast.children\r\n  return children.map(child => gen(child)).join(',') // 孩子 , 拼接\r\n}\r\n\r\nfunction genCode(ast) {\r\n  let code\r\n  code = `_c(\"${ast.tag}\", ${\r\n    ast.attrs.length ? genProps(ast.attrs) : 'undefined'\r\n  }${\r\n    ast.children ? (',' + genChildren(ast)) : '' // 后面的参数都是孩子\r\n  })`\r\n\r\n  return code\r\n}\r\n\r\nexport function compileToFunction(template) {\r\n  let ast = parserHTML(template)\r\n  console.log(\"ast =\", ast)\r\n\r\n  let code = genCode(ast);\r\n  console.log(\"code =\", code)\r\n\r\n  const render = new Function(`with(this){return ${code}}`); // 将字符串变成了函数\r\n  return render\r\n}","export function createElement(vm, tag, data = {}, ...children) {\r\n    return vnode(vm,tag,data,children,data.key,null)\r\n}\r\n\r\nexport function createTextNode(vm,text) {\r\n    return vnode(vm,null,null,null,null,text)\r\n}\r\n\r\nfunction vnode(vm,tag,data,children,key,text){\r\n    return {\r\n        vm,\r\n        tag,\r\n        data,\r\n        children,\r\n        key,\r\n        text\r\n        // ...\r\n    }\r\n}","export function patch(oldVnode,vnode){     // oldVnode 可能是后续做虚拟节点的时候 是两个虚拟节点的比较\r\n  const isRealElement = oldVnode.nodeType\r\n  if(isRealElement){ // 如果有 说明他是一个 dom 元素\r\n    const oldElm = oldVnode\r\n    // 需要获取父节点 将当前节点的下一个元素作为参照物 将他插入，之后删除老节点\r\n    const parentNode = oldElm.parentNode\r\n    let el = createElm(vnode); // 根据虚拟节点\r\n    parentNode.insertBefore(el,oldElm.nextSibling) // nextSibling: 父节点的 childNodes 列表中紧跟在其后面的节点\r\n    parentNode.removeChild(oldElm)\r\n    return el\r\n  }\r\n  // diff算法\r\n}\r\n\r\n\r\nfunction createElm(vnode) {\r\n  let { tag, data, children, text } = vnode\r\n  if(typeof tag === 'string'){                // 元素\r\n    vnode.el = document.createElement(tag)    // 后续我们需要diff算法 拿虚拟节点比对后更新dom\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createElm(child))  // 递归渲染\r\n    })\r\n  }else{ // 文本\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}","let callbacks = []\r\nlet waiting = false\r\nfunction flushCallbacks() {\r\n  callbacks.forEach(cb => cb())\r\n  callbacks = []\r\n  waiting = false\r\n}\r\n\r\n// 异步任务分为 两种 宏任务、微任务\r\n// 宏任务 setTimeout setImmediate(ie下支持性能优于setTimeout)\r\n// 微任务 promise.then mutationObserver\r\n// vue在更新的时候希望尽快的更新页面 promise.then  mutationObserver  setImmediate setTimeout\r\n// vue3不在考虑兼容性问题了 所以后续vue3中直接使用promise.then\r\n\r\nlet timeFunc\r\nif (typeof Promise !== 'undefined') {\r\n  let p = Promise.resolve()\r\n  timeFunc = () => {\r\n    p.then(flushCallbacks)\r\n  }\r\n} else if (typeof MutationObserver !== 'undefined') {\r\n  let observer = new MutationObserver(flushCallbacks) // mutationObserver放的回调是异步执行的\r\n  let textNode = document.createTextNode(1) // 文本节点内容先是 1\r\n  observer.observe(textNode,{ characterData: true })\r\n  timeFunc = () => {\r\n    textNode.textContent = 2 // 改成了2  就会触发更新了\r\n  }\r\n} else if (typeof setImmediate !== 'undefined') {\r\n  timeFunc = () => {\r\n    setImmediate(flushCallbacks)\r\n  }\r\n} else {\r\n  timeFunc = () => {\r\n    setTimeout(flushCallbacks, 0)\r\n  }\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  callbacks.push(cb)\r\n  if (!waiting) {\r\n    waiting = true\r\n    timeFunc()\r\n  }\r\n}","import { nextTick } from \"../utils/nextTick\"\r\nlet queue = []\r\nlet has = {}\r\nlet pending = false\r\n\r\nfunction flushSchedularQueue() {\r\n  queue.forEach(Watcher => Watcher.run())\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\n\r\nexport function queueWatcher(watcher) {\r\n  let id = watcher.id\r\n  if (has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    if (!pending) {\r\n      nextTick(() => { // 万一一个属性 对应多个更新，那么可能会开启多个定时器\r\n        flushSchedularQueue() // 批处理操作 ， 防抖\r\n      })\r\n      pending = true\r\n    }\r\n  }\r\n}","import Dep from './dep'\r\nimport { queueWatcher } from './schedular'\r\nlet wid = 0\r\nclass Watcher {\r\n  constructor(vm, fn, cb, options) {\r\n    this.vm = vm\r\n    this.fn = fn\r\n    this.cb = cb\r\n    this.options = options\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    this.id = wid++\r\n    this.get() // 实现页面的渲染\r\n  }\r\n\r\n  get() {\r\n    Dep.target = this\r\n    this.fn() // 去实例中取值  触发getter\r\n    Dep.target = null // 只有在渲染的时候才有Dep.target属性\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id\r\n    if (!this.depsId.has(id)) {\r\n      this.deps.push(dep)\r\n      this.depsId.add(id)\r\n      dep.addWatcher(this)\r\n    }\r\n  }\r\n  update() {\r\n    queueWatcher(this)\r\n  }\r\n  run() {\r\n    this.get() // 重新执行 updateComponent\r\n  }\r\n}\r\n\r\n// watcher 与 dep 多对多关系，一个属性对应多个 watcher, 一个 watcher 对应多个 dep\r\n\r\nexport default Watcher","import { createElement, createTextNode } from \"./vdom/index\"\r\nimport { patch } from \"./vdom/patch\"\r\nimport Watcher from \"./observe/watcher\"\r\n\r\n// 创造对应的虚拟节点 进行渲染\r\nexport function lifeCycleMixin(Vue) {\r\n  Vue.prototype._c = function() { // 生成 vnode\r\n    return createElement(this, ...arguments)\r\n  }\r\n  Vue.prototype._v = function() {\r\n    return createTextNode(this, ...arguments)\r\n  }\r\n  Vue.prototype._s = function(value) { // 将数据转化成字符串 因为使用的变量对应的结果可能是一个对象\r\n    if(typeof value === 'object' && value !== null){\r\n      return JSON.stringify(value)\r\n    }\r\n    return value\r\n  }\r\n  Vue.prototype._render = function() {\r\n    const vm = this;\r\n    const render = vm.$options.render;\r\n    let vnode = render.call(vm); // _c( _s _v)  with(this) 【此处获取属性时被 Watcher 监听】\r\n    console.log(\"vnode =\", vnode)\r\n    return vnode;\r\n  }\r\n  Vue.prototype._update = function(vnode) { // 将虚拟节点变成真实节点\r\n    // 将 vnode 渲染el元素中\r\n    const vm = this;\r\n    vm.$el = patch(vm.$el,vnode); // 可以初始化渲染， 后续更新也走这个patch方法\r\n  }\r\n}\r\n\r\n\r\nexport function mountComponent(vm, el) {\r\n  // 实现页面的挂载流程\r\n  vm.$el = el;// 先将 el 挂载到实例上\r\n  const updateComponent = () => {\r\n    // 需要调用生成的render函数 获取到虚拟节点  -> 生成真实的dom\r\n    vm._update(vm._render());\r\n  }\r\n\r\n  // 添加监听\r\n  new Watcher(vm, updateComponent, ()=>{\r\n    console.log('页面重新渲染 updated')\r\n  }, true)\r\n  // updateComponent(); // 如果稍后数据变化 也调用这个函数重新执行 \r\n  //后续：观察者模式 + 依赖收集 + diff算法\r\n}","import { initState } from \"./state\";\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { mountComponent } from \"./lifecycle\";\r\n\r\nexport default function initMixin(Vue) {\r\n    Vue.prototype._init = function(options) {\r\n        const vm = this;\r\n        vm.$options = options // 所有后续的扩展方法都有一个$options选项可以获取用户的所有选项\r\n        // 对于实例的数据源 props data methods computed watch\r\n        // props data\r\n        initState(vm);\r\n        // vue中会判断如果是$开头的属性不会被变成响应式数据\r\n\r\n\r\n\r\n        // 状态初始化完毕后需要进行页面挂载\r\n        if (vm.$options.el) { // el 属性 和直接调用$mount是一样的\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function(el) {\r\n        const vm = this;\r\n        el = document.querySelector(el);\r\n        const options = vm.$options;\r\n        if (!options.render) {\r\n            let template = options.template;\r\n            if (!template) { // render 和 template 都没有的情况下才获取 outerHTML\r\n                template = el.outerHTML\r\n            }\r\n            // 将template变成render函数\r\n\r\n            // 创建render函数 -》 虚拟dom  -》 渲染真实dom\r\n            console.log(\"html 初始值\", template)\r\n            const render =  compileToFunction(template); // 开始编译\r\n            options.render = render;\r\n        }\r\n        mountComponent(vm,el)\r\n        console.log(\"render =\", options.render.toString())\r\n    }\r\n}","// 整个自己编写的Vue的入口\r\n\r\nimport initMixin from \"./init\"\r\nimport { lifeCycleMixin } from \"./lifecycle\"\r\nimport { nextTick } from \"./utils/nextTick\"\r\n\r\n// es6的类 要求所有的扩展都在类的内部来进行扩展\r\n\r\nfunction Vue(options){\r\n    this._init(options);\r\n}\r\ninitMixin(Vue)      // 后续在扩展都可以采用这种方式\r\nlifeCycleMixin(Vue) // 给 Vue 实例添加方法\r\n\r\nVue.prototype.$nextTick = nextTick\r\n\r\n// 给Vue添加原型方法我们通过文件的方式来添加，防止所有的功能都在一个文件中来处理\r\nexport default Vue"],"names":["oldArrayPrototype","Array","prototype","arrayPrototype","Object","create","methods","forEach","method","inserted","ob","__ob__","args","slice","observeArray","result","call","dep","notify","did","Dep","id","watchers","target","addDep","watcher","push","update","Observer","data","defineProperty","value","enumerable","isArray","__proto__","walk","item","observe","keys","key","defineReactive","dependArray","i","length","temp","depend","childOb","get","set","newValue","initState","vm","options","$options","initData","proxy","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","parserHTML","html","advance","n","substring","console","log","root","stack","createASTElement","tagName","attrs","tag","children","parent","type","start","element","end","pop","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","matches","match","attr","name","genProps","str","obj","split","reduce","memo","current","JSON","stringify","gen","node","genCode","test","tokens","startIndex","lastIndex","exec","endIndex","index","trim","join","genChildren","ast","map","child","code","compileToFunction","template","render","Function","createElement","vnode","createTextNode","patch","oldVnode","isRealElement","nodeType","oldElm","parentNode","el","createElm","insertBefore","nextSibling","removeChild","document","appendChild","callbacks","waiting","flushCallbacks","cb","timeFunc","Promise","p","resolve","then","MutationObserver","observer","textNode","characterData","textContent","setImmediate","setTimeout","nextTick","queue","has","pending","flushSchedularQueue","Watcher","run","queueWatcher","wid","fn","deps","depsId","Set","add","addWatcher","lifeCycleMixin","Vue","_c","arguments","_v","_s","_render","_update","$el","mountComponent","updateComponent","initMixin","_init","$mount","querySelector","outerHTML","toString","$nextTick"],"mappings":"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"}