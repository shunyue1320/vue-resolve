{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compiler/index.js","../src/vdom/index.js","../src/vdom/patch.js","../src/utils/nextTick.js","../src/observe/schedular.js","../src/observe/watcher.js","../src/lifecycle.js","../src/globalAPI/index.js","../src/init.js","../src/index.js"],"sourcesContent":["let oldArrayPrototype = Array.prototype;\r\n// arrayProptotype.__proto__ = Array.prototype;\r\n\r\nlet arrayPrototype = Object.create(oldArrayPrototype);\r\nlet methods = [\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'reverse',\r\n    'sort',\r\n    'splice'\r\n]\r\n// 重写数组 7 方法 （目的就是对新增的数据再次进行观测 避免里面出现没有监听到的对象数据）\r\n// 如 arr[1000] = 1234 更改数组会响应式是通过 $set 实现的\r\nmethods.forEach(method => { // 用户调用push方法会先经历我自己重写的方法,之后调用数组原来的方法\r\n    arrayPrototype[method] = function(...args) {\r\n        let inserted;\r\n        let ob = this.__ob__;\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args; // 数组\r\n                break;\r\n            case 'splice': // arr.splice(1,1,xxx)\r\n                inserted = args.slice(2); // 接去掉前两个参数\r\n            default:\r\n                break\r\n        }\r\n        if (inserted) {\r\n            // 对新增的数据再次进行观测\r\n            ob.observeArray(inserted)\r\n        }\r\n        let result = oldArrayPrototype[method].call(this, ...args)\r\n        ob.dep.notify()\r\n        return result\r\n    }\r\n})\r\nexport default arrayPrototype\r\n\r\n","let did = 0\r\n\r\n// 收集 watcher\r\nclass Dep {\r\n  constructor() {\r\n    this.id = did++\r\n    this.watchers = []\r\n  }\r\n  depend() { // watcher 和 dep 是一个多对多的关系\r\n    Dep.target.addDep(this) // 让 watcher 去记录 dep\r\n  }\r\n  addWatcher (watcher) {\r\n    this.watchers.push(watcher)\r\n  }\r\n  notify () {\r\n    this.watchers.forEach(watcher => watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null // 描述当前watcher是谁的\r\nexport default Dep","import arrayPrototype from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    // 如果是数组的话也是用defineProperty会浪费很多性能 很少用户会通过arr[878] = 123\r\n    // vue3中的polyfill 直接就给数组做代理了\r\n    // 改写数组的方法，如果用户调用了可以改写数组方法的api 那么我就去劫持这个方法\r\n    // 变异方法 push pop shift unshift reverse sort splice\r\n\r\n    this.dep = new Dep(); // 给所有的对象都增加一个dep, 后续我们会给对象增添新的属性也期望能实现更新\r\n    Object.defineProperty(data, \"__ob__\", {\r\n      value: this,\r\n      enumerable: false,\r\n    });\r\n    // 如果有__ob__属性 说明被观测过了\r\n    // 修改数组的索引和长度是无法更新视图的\r\n    if (Array.isArray(data)) {\r\n      // 需要重写这7个方法\r\n      data.__proto__ = arrayPrototype;\r\n      // 直接将属性赋值给这个对象\r\n      // 如果数组里面放的是对象类型 我期望他也会被变成响应式的\r\n      this.observeArray(data);\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  observeArray(data) {\r\n    data.forEach((item) => observe(item)); //如果是对象我才进行观测了\r\n  }\r\n  walk(data) {\r\n    // 循环对象 尽量不用for in （会遍历原型链）\r\n    let keys = Object.keys(data); // [0,1,2]\r\n    keys.forEach((key) => {\r\n      //没有重写数组里的每一项\r\n      defineReactive(data, key, data[key]);\r\n    });\r\n  }\r\n}\r\n\r\nfunction dependArray(value) {\r\n  for (let i = 0; i < value.length; i++) {\r\n    let temp = value[i];\r\n    temp.__ob__ && temp.__ob__.dep.depend(); // 让数组中的对象类型做依赖收集  [[[]]]\r\n    if (Array.isArray(temp)) {\r\n      dependArray(temp);\r\n    }\r\n  }\r\n}\r\n\r\n// 性能不好的原因在于 所有的属性都被重新定义了一遍\r\n// 一上来需要将对象深度代理 性能差\r\nfunction defineReactive(data, key, value) {\r\n  //  闭包\r\n  // 属性会全部被重写增加了get和set\r\n  let dep = new Dep();\r\n  let childOb = observe(value); // 递归代理属性\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // vm.xxx\r\n      if (Dep.target) {\r\n        dep.depend(); // 依赖收集 要将属性收集对应的 watcher\r\n        if (childOb) {\r\n          childOb.dep.depend(); // 让数组和对象也记录一下渲染 watcher\r\n          if (Array.isArray(value)) {\r\n            dependArray(value);\r\n          }\r\n        }\r\n      }\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      // vm.xxx = {a:1} 赋值一个对象的话 也可以实现响应式数据\r\n      if (newValue === value) return;\r\n      childOb = observe(newValue);\r\n      value = newValue;\r\n      dep.notify(); // 通知依赖的watcher去重新渲染\r\n    },\r\n  });\r\n}\r\nexport function observe(data) {\r\n  if (typeof data !== \"object\" || data == null) {\r\n    return; // 如果不是对象类型，那么不要做任何处理\r\n  }\r\n  if (data.__ob__) {\r\n    // 说明这个属性已经被代理过了\r\n    return data;\r\n  }\r\n\r\n  // 我稍后要区分 如果一个对象已经被观测了，就不要再次被观测了\r\n  // __ob__ 标识是否有被观测过\r\n\r\n  return new Observer(data);\r\n}\r\n\r\n// 每个类头有一个prototype 指向了一个公共的空间\r\n// 每个实例可以通过__proto__ 找到所属类的prototype对应的内容\r\n\r\n// 1.在Vue2中对象的响应式原理，就是给每个属性增加get和set，而且是递归操作 （用户在写代码的时候尽量不要把所有的属性都放在data中，层次尽可能不要太深）, 赋值一个新对象也会被变成响应式的\r\n// 2.数组没有使用defineProperty 采用的是函数劫持创造一个新的原型重写了这个原型的7个方法，用户在调用的时候采用的是这7个方法。我们增加了逻辑如果是新增的数据会再次被劫持 。 最终调用数组的原有方法 （注意数字的索引和长度没有被监控）  数组中对象类型会被进行响应式处理\r\n","import { observe } from \"./observe/index\";\r\n\r\nexport function initState(vm) {\r\n    const options = vm.$options\r\n\r\n    // 后续实现计算属性 、 watcher 、 props 、methods\r\n    if (options.data) {\r\n        initData(vm);\r\n    }\r\n}\r\n\r\nfunction proxy(vm, source, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[source][key]\r\n        },\r\n        set(newValue) {\r\n            vm[source][key] = newValue;\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n    // 如果是函数就拿到函数的返回值 否则就直接采用data作为数据源\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n\r\n    // 属性劫持 采用defineProperty将所有的属性进行劫持\r\n\r\n    // 我期望用户可以直接通过 vm.xxx 获取值， 也可以这样取值 vm._data.xxx\r\n    for (let key in data) {\r\n        proxy(vm, '_data', key)\r\n    }\r\n    observe(data)\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 用来描述标签的\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的  捕获的是结束标签的标签名\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的  分组1 拿到的是属性名  , 分组3 ，4， 5 拿到的是key对应的值\r\n\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的    />    >   \r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配双花括号中间单的内容\r\n\r\nfunction parserHTML(html) {\r\n  function advance(n) {\r\n    html = html.substring(n) // 每次根据传入的长度截取html\r\n    console.log(\"html 剩下\", html)\r\n  }\r\n\r\n  // 树的操作 ，需要根据开始标签和结束标签产生一个树\r\n  let root\r\n  // 如何创建树的父子关系\r\n  let stack = []\r\n\r\n  function createASTElement(tagName, attrs) {\r\n    return {\r\n      tag: tagName,\r\n      attrs,\r\n      children: [],\r\n      parent: null,\r\n      type: 1\r\n    }\r\n  }\r\n\r\n  // 开始标签进栈 （先进后出原理）\r\n  function start(tagName, attrs) {\r\n    let element = createASTElement(tagName, attrs)\r\n    if (root == null) {\r\n      root = element\r\n    }\r\n    let parent = stack[stack.length - 1] // 取到栈中的最后一个\r\n    if (parent) {\r\n      element.parent = parent       // 让这个元素记住自己的父亲是谁\r\n      parent.children.push(element) // 让父亲记住儿子是谁\r\n    }\r\n    stack.push(element) //入栈\r\n  }\r\n\r\n  // 结束标签出栈\r\n  function end(tagName) {\r\n    stack.pop() //出栈\r\n  }\r\n\r\n  // 处理标签内容\r\n  function chars(text) {\r\n    text = text.replace(/\\s/g, '')\r\n    if (text) {\r\n      let parent = stack[stack.length - 1]\r\n      parent.children.push({ // 增加一个子元素\r\n        type: 3, // 类型 3 表示文本\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  //  ast 描述的是语法本身 ，语法中没有的，不会被描述出来  虚拟dom 是描述真实dom的可以自己增添属性\r\n  while (html) {\r\n    // 1. 处理开始标签 （就是处理 <div id=\"app\">{{name}}</div>  的 <div id=\"app\"> 部分）\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag(); // 解析开始标签  {tagName:'div',attrs:[{name:\"id\",value:\"app\"}]}\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n\r\n      // 3. 处理结束标签 （就是处理 <div id=\"app\">{{name}}</div>  的 </div> 部分）\r\n      let matches\r\n      if (matches = html.match(endTag)) {\r\n        end(matches[1])\r\n        advance(matches[0].length)\r\n        continue\r\n      }\r\n    }\r\n\r\n    // 2. 处理标签内容 （就是处理 <div id=\"app\">{{name}}</div> 的 {{name}} 部分）\r\n    let text\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length) // html 删去 text， 处理一点删一点\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n\r\n  function parseStartTag() {\r\n    const matches = html.match(startTagOpen) // 获取标签头 <div id=\"app\">{{name}}</div> 的 <div 部分\r\n    if (matches) {\r\n      const match = {\r\n        tagName: matches[1],\r\n        attrs: []\r\n      }\r\n      advance(matches[0].length) // 删除html前面匹配到的标签名字符串\r\n      let end, attr\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        // while循环取属性 直到取完\r\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true })\r\n        advance(attr[0].length) // 取到一个属性删除一个\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  return root\r\n}\r\n\r\n// 参数拼接成对象\r\nfunction genProps(attrs) {\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i]\r\n    if (attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').reduce((memo, current) => {\r\n        let [key, value] = current.split(':')\r\n        memo[key] = value\r\n        return memo\r\n      }, obj)\r\n      attr.value = obj // 这里是样式对象 例：{color:red,background:blue}\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0,-1)}}` // 删除最后的 ,\r\n}\r\n\r\nfunction gen(node) {\r\n  if (node.type === 1) {  // 是节点\r\n    return genCode(node)\r\n  } else {\r\n    let text = node.text\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})` // 不带表达式的\r\n    } else {\r\n      let tokens = []\r\n      let match\r\n      // exec 遇到全局匹配会有 lastIndex 问题 每次匹配前需要将lastIndex 置为 0\r\n      let startIndex = defaultTagRE.lastIndex = 0\r\n      while (match = defaultTagRE.exec(text)) {\r\n        let endIndex = match.index // 匹配到索引\r\n        if (endIndex > startIndex) {\r\n          tokens.push(JSON.stringify(text.slice(startIndex, endIndex)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        startIndex = endIndex + match[0].length\r\n      }\r\n      if (startIndex < text.length) { // 最后的尾巴放进去\r\n        tokens.push(JSON.stringify(text.slice(startIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})` // 最后将动态数据 和非动态的拼接在一起\r\n    }\r\n  }\r\n}\r\n\r\nfunction genChildren(ast) {\r\n  const children = ast.children\r\n  return children.map(child => gen(child)).join(',') // 孩子 , 拼接\r\n}\r\n\r\nfunction genCode(ast) {\r\n  let code\r\n  code = `_c(\"${ast.tag}\", ${\r\n    ast.attrs.length ? genProps(ast.attrs) : 'undefined'\r\n  }${\r\n    ast.children ? (',' + genChildren(ast)) : '' // 后面的参数都是孩子\r\n  })`\r\n\r\n  return code\r\n}\r\n\r\nexport function compileToFunction(template) {\r\n  let ast = parserHTML(template)\r\n  console.log(\"ast =\", ast)\r\n\r\n  let code = genCode(ast);\r\n  console.log(\"code =\", code)\r\n\r\n  const render = new Function(`with(this){return ${code}}`); // 将字符串变成了函数\r\n  return render\r\n}","export function createElement(vm, tag, data = {}, ...children) {\r\n    return vnode(vm,tag,data,children,data.key,null)\r\n}\r\n\r\nexport function createTextNode(vm,text) {\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\n\r\nfunction vnode(vm,tag,data,children,key,text){\r\n    return {\r\n        vm,\r\n        tag,\r\n        data,\r\n        children,\r\n        key,\r\n        text\r\n        // ...\r\n    }\r\n}","export function patch(oldVnode,vnode){     // oldVnode 可能是后续做虚拟节点的时候 是两个虚拟节点的比较\r\n  console.log(\"oldVnode\", oldVnode, \"vnode\", vnode)\r\n  const isRealElement = oldVnode.nodeType\r\n  if(isRealElement){ // 如果有 说明他是一个 dom 元素 (直接挂载 不需要 diff)\r\n    const oldElm = oldVnode\r\n    // 需要获取父节点 将当前节点的下一个元素作为参照物 将他插入，之后删除老节点\r\n    const parentNode = oldElm.parentNode\r\n    let el = createElm(vnode); // 根据虚拟节点\r\n    parentNode.insertBefore(el,oldElm.nextSibling) // nextSibling: 父节点的 childNodes 列表中紧跟在其后面的节点\r\n    parentNode.removeChild(oldElm)\r\n    return el\r\n  } else {\r\n    // diff算法\r\n    patchVnode(oldVnode, vnode);\r\n    return vnode.el\r\n  }\r\n}\r\n\r\nfunction patchVnode(oldVnode, vnode) {\r\n  // case1: 前后两个虚拟节点不是相同节点直接替换掉即可\r\n  if (!isSameVnode(oldVnode, vnode)) {\r\n    return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\r\n  }\r\n\r\n  // 标签一样我们就复用节点\r\n  let el = vnode.el = oldVnode.el\r\n\r\n  // case2：两个元素虚拟节点都是文本的情况下 用新文本换掉老的文本即可\r\n  if (!oldVnode.tag) { // 是文本\r\n    if (oldVnode.text !== vnode.text) {\r\n      return el.textContent = vnode.text\r\n    }\r\n  }\r\n\r\n  // case3: 两个都是标签 比较属性\r\n  updateProperties(vnode, oldVnode.data)\r\n\r\n  // case4: 比较儿子节点\r\n  let oldChildren = oldVnode.children || []\r\n  let newChildren = vnode.children || []\r\n\r\n  // (1). 两方都有儿子 \r\n  if (oldChildren.length > 0 && newChildren.length > 0) {\r\n    // diff算法是一层层的比较 不涉及到跨级比较\r\n    updateChildren(el, oldChildren, newChildren)\r\n  }\r\n  // (2). 一方有儿子 一方没儿子 \r\n  else if (newChildren.length > 0) {\r\n    for (let i = 0; i < newChildren.length; i++) {\r\n      el.appendChild(createElm(newChildren[i]))\r\n    }\r\n  } else if (oldChildren.length > 0) {\r\n    el.innerHTML = '' // 清空子节点\r\n  }\r\n}\r\n\r\n// 是否是同一元素\r\nfunction isSameVnode(n1, n2) {\r\n  return n1.tag == n2.tag && n1.key === n2.key\r\n}\r\n\r\nexport function createElm(vnode) {\r\n  let { tag, data, children, text } = vnode\r\n  if(typeof tag === 'string'){                // 元素\r\n    vnode.el = document.createElement(tag)    // 后续我们需要diff算法 拿虚拟节点比对后更新dom\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createElm(child))  // 递归渲染\r\n    })\r\n\r\n    // 样式类名....\r\n    updateProperties(vnode)\r\n  }else{ // 文本\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}\r\n\r\n// 更新节点的 style 与 props\r\nfunction updateProperties(vnode, oldProps = {}) {\r\n  let newProps = vnode.data || {}\r\n  // 老的props \r\n  // 属性的diff算法\r\n  let el = vnode.el\r\n  // 比较sytle 特殊一些 需要看下样式\r\n  let oldStyle = oldProps.style || {}\r\n  let newStyle = newProps.style || {}\r\n  for (let key in oldStyle) {\r\n    if (!(key in newStyle)) {\r\n      el.style[key] = ''\r\n    }\r\n  }\r\n  for (let key in oldProps) {\r\n    if (!(key in newProps)) {\r\n      el.removeAttribute(key)\r\n    }\r\n  }\r\n  for (let key in newProps) {\r\n    if (key === 'style') {\r\n      for (let styleKey in newProps[key]) {\r\n        el.style[styleKey] = newProps[key][styleKey]\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = newProps[key]\r\n    } else {\r\n      el.setAttribute(key, newProps[key])\r\n    }\r\n  }\r\n}\r\n\r\n\r\n// diff算法采用了双指针的方式进行比对，并且是O(n)\r\nfunction updateChildren(el, oldChildren, newChildren) {\r\n  // vue中创建了4个指针 分别指向 老孩子和新孩子的头尾\r\n  // 分别依次进行比较有一方先比较完毕就结束比较\r\n  let oldStartIndex = 0;\r\n  let oldEndIndex = oldChildren.length - 1;\r\n  let newStartIndex = 0;\r\n  let newEndIndex = newChildren.length - 1;\r\n\r\n  let oldStartVnode = oldChildren[0];\r\n  let oldEndVnode = oldChildren[oldEndIndex];\r\n  let newStartVnode = newChildren[0];\r\n  let newEndVnode = newChildren[newEndIndex];\r\n\r\n  // 有一方比完就停止  儿子的规模变大而变大 O(n)\r\n\r\n  function makeIndexByKey(children) {\r\n    return children.reduce((memo, current, index) => (memo[current.key] = index, memo), {})\r\n  }\r\n  let map = makeIndexByKey(oldChildren)\r\n\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    // 这里在优化dom的常见操作 向前追加 向后追加  尾部移动头部\r\n    // 复用节点\r\n    if (!oldStartVnode) {      // [ C1 C2 null C4 C5 ]  (oldStartIndex = null -> C4)\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n    } else if (!oldEndVnode) { // [ C1 C2 C3 C4 unll ]  (oldEndVnode = null -> C4) \r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n\r\n\r\n      /* \r\n      O1 == N1\r\n      oldChildrens: [O1 O2 O3]\r\n      newChildrens: [N1 N2 N3]\r\n      */\r\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) { // true则: 说明两个元素是同一个元素 要比较属性，和他的儿子\r\n      patchVnode(oldStartVnode, newStartVnode) // 递归比较他们的儿子\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n      newStartVnode = newChildren[++newStartIndex]\r\n\r\n\r\n      // O3 == N3\r\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) {\r\n      patchVnode(oldEndVnode, newEndVnode)\r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n      newEndVnode = newChildren[--newEndIndex]\r\n\r\n      /* \r\n      O3 == N1\r\n      oldChildrens: [O1 O2 O3]\r\n      newChildrens: [N1 N2 N3]\r\n\r\n      childrenElements: [O1 O2 O3] => [O3 O1 O2] // html节点移动\r\n      */\r\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) {\r\n      patchVnode(oldEndVnode, newStartVnode)\r\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el) // oldEndVnode 节点移动到 oldStartVnode 前面\r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n      newStartVnode = newChildren[++newStartIndex]\r\n\r\n      /* \r\n      O1 == N3\r\n      oldChildrens: [O1 O2 O3]\r\n      newChildrens: [N1 N2 N3]\r\n\r\n      childrenElements: [O1 O2 O3] => [O2 O3 O1]\r\n      */\r\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\r\n      patchVnode(oldStartVnode, newEndVnode);\r\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling) // oldStartVnode 节点移动到 oldEndVnode 后面\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n      newEndVnode = newChildren[--newEndIndex]\r\n    }\r\n\r\n    // 会根据key进行diff算法 ， 所以在使用的时候如果列表是可操作的，尽量避开用index作为key\r\n    else {\r\n      // 乱序比对 我们需要尽可能找出能复用的元素出来\r\n      let moveIndex = map[newStartVnode.key]\r\n      if (moveIndex == undefined) {\r\n        // 不用复用直接创建插入即可\r\n        el.insertBefore(createElm(newStartVnode), oldStartVnode.el)\r\n      } else {\r\n        // 有的话直接移动老的节点\r\n        let moveVnode = oldChildren[moveIndex];\r\n        oldChildren[moveIndex] = undefined\r\n        el.insertBefore(moveVnode.el, oldStartVnode.el);\r\n        patchVnode(moveVnode, newStartVnode); // 比属性 比儿子\r\n      }\r\n      newStartVnode = newChildren[++newStartIndex]\r\n    }\r\n  }\r\n\r\n  // 将新增的直接插入 (newChildren 剩下的 vnode 是需要新增的)\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      let nextEle = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el\r\n      // nextEle 可能是一个dom元素 可能是null 是null insertBefore会被变成appendChild\r\n      el.insertBefore(createElm(newChildren[i]), nextEle)\r\n    }\r\n  }\r\n\r\n  // 删除老的多余元素 (oldChildren 剩下的 vnode 是需要删除的)\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n      if (oldChildren[i] !== undefined) {\r\n        el.removeChild(oldChildren[i].el)\r\n      }\r\n    }\r\n  }\r\n}\r\n// Vue3采用了最长递增子序列，找到最长不需要移动的序列，从而减少了移动操作","let callbacks = []\r\nlet waiting = false\r\nfunction flushCallbacks(){\r\n  waiting = false; \r\n  // 默认第一次会将两次的nextTick 都维护到callbacks中 [用户的，页面渲染的]\r\n  let cbs = callbacks.slice(0);\r\n  callbacks = [];\r\n  cbs.forEach(cb=>cb());\r\n}\r\n\r\n// 异步任务分为 两种 宏任务、微任务\r\n// 宏任务 setTimeout setImmediate(ie下支持性能优于setTimeout)\r\n// 微任务 promise.then mutationObserver\r\n// vue在更新的时候希望尽快的更新页面 promise.then  mutationObserver  setImmediate setTimeout\r\n// vue3不在考虑兼容性问题了 所以后续vue3中直接使用promise.then\r\n\r\nlet timeFunc\r\nif (typeof Promise !== 'undefined') {\r\n  let p = Promise.resolve()\r\n  timeFunc = () => {\r\n    p.then(flushCallbacks)\r\n  }\r\n} else if (typeof MutationObserver !== 'undefined') {\r\n  let observer = new MutationObserver(flushCallbacks) // mutationObserver放的回调是异步执行的\r\n  let textNode = document.createTextNode(1) // 文本节点内容先是 1\r\n  observer.observe(textNode,{ characterData: true })\r\n  timeFunc = () => {\r\n    textNode.textContent = 2 // 改成了2  就会触发更新了\r\n  }\r\n} else if (typeof setImmediate !== 'undefined') {\r\n  timeFunc = () => {\r\n    setImmediate(flushCallbacks)\r\n  }\r\n} else {\r\n  timeFunc = () => {\r\n    setTimeout(flushCallbacks, 0)\r\n  }\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  callbacks.push(cb)\r\n  if (!waiting) {\r\n    waiting = true\r\n    timeFunc()\r\n  }\r\n}","import { nextTick } from \"../utils/nextTick\"\r\nlet queue = []\r\nlet has = {}\r\nlet pending = false\r\n\r\nfunction flushSchedularQueue() {\r\n  queue.forEach(Watcher => Watcher.run())\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\n\r\nexport function queueWatcher(watcher) {\r\n  let id = watcher.id\r\n  if (has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    if (!pending) {\r\n      nextTick(() => { // 万一一个属性 对应多个更新，那么可能会开启多个定时器\r\n        flushSchedularQueue() // 批处理操作 ， 防抖\r\n      })\r\n      pending = true\r\n    }\r\n  }\r\n}","import Dep from './dep'\r\nimport { queueWatcher } from './schedular'\r\nlet wid = 0\r\nclass Watcher {\r\n  constructor(vm, fn, cb, options) {\r\n    this.vm = vm\r\n    this.fn = fn\r\n    this.cb = cb\r\n    this.options = options\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    this.id = wid++\r\n    this.get() // 实现页面的渲染\r\n  }\r\n\r\n  get() {\r\n    Dep.target = this\r\n    this.fn() // 去实例中取值  触发getter\r\n    Dep.target = null // 只有在渲染的时候才有Dep.target属性\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id\r\n    if (!this.depsId.has(id)) {\r\n      this.deps.push(dep)\r\n      this.depsId.add(id)\r\n      dep.addWatcher(this)\r\n    }\r\n  }\r\n  update() {\r\n    queueWatcher(this)\r\n  }\r\n  run() {\r\n    this.get() // 重新执行 updateComponent\r\n  }\r\n}\r\n\r\n// watcher 与 dep 多对多关系，一个属性对应多个 watcher, 一个 watcher 对应多个 dep\r\n\r\nexport default Watcher","import { createElement, createTextNode } from \"./vdom/index\"\r\nimport { patch } from \"./vdom/patch\"\r\nimport Watcher from \"./observe/watcher\"\r\n\r\n// 创造对应的虚拟节点 进行渲染\r\nexport function lifeCycleMixin(Vue) {\r\n  Vue.prototype._c = function() { // 生成 vnode\r\n    return createElement(this, ...arguments)\r\n  }\r\n  Vue.prototype._v = function() {\r\n    return createTextNode(this, ...arguments)\r\n  }\r\n  Vue.prototype._s = function(value) { // 将数据转化成字符串 因为使用的变量对应的结果可能是一个对象\r\n    if(typeof value === 'object' && value !== null){\r\n      return JSON.stringify(value)\r\n    }\r\n    return value\r\n  }\r\n  Vue.prototype._render = function() {\r\n    const vm = this;\r\n    const render = vm.$options.render;\r\n    let vnode = render.call(vm); // _c( _s _v)  with(this) 【此处获取属性时被 Watcher 监听】\r\n    console.log(\"vnode =\", vnode)\r\n    return vnode;\r\n  }\r\n  Vue.prototype._update = function(vnode) { // 将虚拟节点变成真实节点\r\n    // 将 vnode 渲染el元素中\r\n    const vm = this;\r\n    const prevVnode = vm._vnode\r\n    if (!prevVnode) {\r\n      vm.$el = patch(vm.$el, vnode) // 可以初始化渲染， 后续更新也走这个patch方法\r\n    } else {\r\n      vm.$el = patch(prevVnode, vnode) // 第二次 patch 都传 vnode\r\n    }\r\n\r\n    vm._vnode = vnode // 存储旧 vnode\r\n  }\r\n}\r\n\r\nexport function callHook(vm, hook){\r\n  const handlers = vm.$options[hook]\r\n  handlers && handlers.forEach(hook => hook.call(vm))\r\n}\r\n\r\n\r\nexport function mountComponent(vm, el) {\r\n  // 实现页面的挂载流程\r\n  vm.$el = el;// 先将 el 挂载到实例上\r\n  callHook(vm,'beforeMount')\r\n  const updateComponent = () => {\r\n    // 需要调用生成的render函数 获取到虚拟节点  -> 生成真实的dom\r\n    vm._update(vm._render());\r\n  }\r\n\r\n  // 添加监听\r\n  new Watcher(vm, updateComponent, ()=>{\r\n    console.log('页面重新渲染 updated')\r\n  }, true)\r\n  // updateComponent(); // 如果稍后数据变化 也调用这个函数重新执行 \r\n  //后续：观察者模式 + 依赖收集 + diff算法\r\n}","export default function initGlobalAPI(Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function (options) {\r\n    this.options = mergeOptions(this.options, options)\r\n    return this\r\n  }\r\n}\r\n\r\nconst LIFECYCLE_HOOKS = ['beforeCreate', 'mounted']\r\nconst strats = {}\r\n\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n  strats[hook] = function(parentVal, childVal) {\r\n    if (childVal) {\r\n      if (parentVal) {\r\n        return parentVal.concat(childVal)\r\n      } else {\r\n        return [ childVal ]\r\n      }\r\n    } else {\r\n      return parentVal\r\n    }\r\n  }\r\n})\r\n\r\n// 合并两个对象\r\nexport function mergeOptions(parent, child) {\r\n  const options = {}\r\n  for (const key in parent) {\r\n    mergeField(key)\r\n  }\r\n  for (const key in child) {\r\n    if (!(key in parent)) {\r\n      mergeField(key)\r\n    }\r\n  }\r\n\r\n  function mergeField(key) {\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parent[key], child[key])\r\n    } else {\r\n      options[key] = child[key] || parent[key]\r\n    }\r\n  }\r\n\r\n  return options\r\n}","import { initState } from \"./state\";\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { mergeOptions } from \"./globalAPI/index\";\r\n\r\nexport default function initMixin(Vue) {\r\n    Vue.prototype._init = function(options) {\r\n        const vm = this;\r\n        vm.$options = mergeOptions(vm.constructor.options, options) // 所有后续的扩展方法都有一个$options选项可以获取用户的所有选项\r\n        // 对于实例的数据源 props data methods computed watch\r\n        // props data\r\n        callHook(vm,'beforeCreate')\r\n        initState(vm);\r\n        // vue中会判断如果是$开头的属性不会被变成响应式数据\r\n        callHook(vm,'created')\r\n\r\n        // 状态初始化完毕后需要进行页面挂载\r\n        if (vm.$options.el) { // el 属性 和直接调用$mount是一样的\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function(el) {\r\n        const vm = this;\r\n        el = document.querySelector(el);\r\n        const options = vm.$options;\r\n        if (!options.render) {\r\n            let template = options.template;\r\n            if (!template) { // render 和 template 都没有的情况下才获取 outerHTML\r\n                template = el.outerHTML\r\n            }\r\n            // 将template变成render函数\r\n\r\n            // 创建render函数 -》 虚拟dom  -》 渲染真实dom\r\n            console.log(\"html 初始值\", template)\r\n            const render =  compileToFunction(template); // 开始编译\r\n            options.render = render;\r\n        }\r\n        mountComponent(vm,el)\r\n        console.log(\"render =\", options.render.toString())\r\n    }\r\n}","// 整个自己编写的Vue的入口\r\n\r\nimport initMixin from \"./init\"\r\nimport { lifeCycleMixin } from \"./lifecycle\"\r\nimport { nextTick } from \"./utils/nextTick\"\r\nimport initGlobalAPI from \"./globalAPI/index\"\r\n\r\n// es6的类 要求所有的扩展都在类的内部来进行扩展\r\n\r\nfunction Vue(options){\r\n    this._init(options);\r\n}\r\ninitMixin(Vue)      // 后续在扩展都可以采用这种方式\r\nlifeCycleMixin(Vue) // 给 Vue 实例添加方法\r\n\r\ninitGlobalAPI(Vue) // 合并 options\r\n\r\nVue.prototype.$nextTick = nextTick\r\n\r\n// 给Vue添加原型方法我们通过文件的方式来添加，防止所有的功能都在一个文件中来处理\r\n\r\n\r\n/************* diff 算法校验 start *************/\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { createElm, patch } from \"./vdom/patch\";\r\nlet vm1 = new Vue({\r\n    data: {\r\n        name: '11111111',\r\n        age: 11\r\n    },\r\n});\r\nlet template = `<div style=\"color:red\">\r\n    <li key=\"A\">A</li>\r\n    <li key=\"B\">B</li>\r\n    <li key=\"C\">C</li>\r\n    <li key=\"D\">D</li>\r\n</div>`\r\nlet render = compileToFunction(template);\r\nlet oldVnode = render.call(vm1);\r\nlet ele = createElm(oldVnode);\r\ndocument.body.appendChild(ele); // 就让虚拟节点和真实节点做了映射\r\n\r\n// diff算法的比对是平级比对\r\n// 比对的时候 主要比对标签名和key 来判断是不是同一个元素 ，如果标签和key 都一样说明两个元素是同一个元素\r\nlet vm2 = new Vue({});\r\nlet newTemplate = `<div style=\"color:blue\">\r\n    <li key=\"M\">M</li>\r\n    <li key=\"Q\">Q</li>\r\n    <li key=\"D\">D</li>\r\n    <li key=\"E\">E</li>\r\n    <li key=\"F\">F</li>\r\n</div>`\r\nlet newRender = compileToFunction(newTemplate);\r\nlet newVnode = newRender.call(vm2);\r\n\r\n// diff 算法校验\r\nsetTimeout(() => {\r\n    patch(oldVnode, newVnode)\r\n}, 2000);\r\n/************* diff 算法校验 end *************/\r\n\r\nexport default Vue"],"names":["oldArrayPrototype","Array","prototype","arrayPrototype","Object","create","methods","forEach","method","inserted","ob","__ob__","args","slice","observeArray","result","call","dep","notify","did","Dep","id","watchers","target","addDep","watcher","push","update","Observer","data","defineProperty","value","enumerable","isArray","__proto__","walk","item","observe","keys","key","defineReactive","dependArray","i","length","temp","depend","childOb","get","set","newValue","initState","vm","options","$options","initData","proxy","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","parserHTML","html","advance","n","substring","console","log","root","stack","createASTElement","tagName","attrs","tag","children","parent","type","start","element","end","pop","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","matches","match","attr","name","genProps","str","obj","split","reduce","memo","current","JSON","stringify","gen","node","genCode","test","tokens","startIndex","lastIndex","exec","endIndex","index","trim","join","genChildren","ast","map","child","code","compileToFunction","template","render","Function","createElement","vnode","createTextNode","undefined","patch","oldVnode","isRealElement","nodeType","oldElm","parentNode","el","createElm","insertBefore","nextSibling","removeChild","patchVnode","isSameVnode","replaceChild","textContent","updateProperties","oldChildren","newChildren","updateChildren","appendChild","innerHTML","n1","n2","document","oldProps","newProps","oldStyle","style","newStyle","removeAttribute","styleKey","className","setAttribute","oldStartIndex","oldEndIndex","newStartIndex","newEndIndex","oldStartVnode","oldEndVnode","newStartVnode","newEndVnode","makeIndexByKey","moveIndex","moveVnode","nextEle","callbacks","waiting","flushCallbacks","cbs","cb","timeFunc","Promise","p","resolve","then","MutationObserver","observer","textNode","characterData","setImmediate","setTimeout","nextTick","queue","has","pending","flushSchedularQueue","Watcher","run","queueWatcher","wid","fn","deps","depsId","Set","add","addWatcher","lifeCycleMixin","Vue","_c","arguments","_v","_s","_render","_update","prevVnode","_vnode","$el","callHook","hook","handlers","mountComponent","updateComponent","initGlobalAPI","mixin","mergeOptions","LIFECYCLE_HOOKS","strats","parentVal","childVal","concat","mergeField","initMixin","_init","constructor","$mount","querySelector","outerHTML","toString","$nextTick","vm1","age","ele","body","vm2","newTemplate","newRender","newVnode"],"mappings":"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"}