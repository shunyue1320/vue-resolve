{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/utils/nextTick.js","../src/observe/schedular.js","../src/observe/watcher.js","../src/state.js","../src/compiler/index.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/globalAPI/index.js","../src/init.js","../src/index.js"],"sourcesContent":["let oldArrayPrototype = Array.prototype;\r\n// arrayProptotype.__proto__ = Array.prototype;\r\n\r\nlet arrayPrototype = Object.create(oldArrayPrototype);\r\nlet methods = [\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'reverse',\r\n    'sort',\r\n    'splice'\r\n]\r\n// 重写数组 7 方法 （目的就是对新增的数据再次进行观测 避免里面出现没有监听到的对象数据）\r\n// 如 arr[1000] = 1234 更改数组会响应式是通过 $set 实现的\r\nmethods.forEach(method => { // 用户调用push方法会先经历我自己重写的方法,之后调用数组原来的方法\r\n    arrayPrototype[method] = function(...args) {\r\n        let inserted;\r\n        let ob = this.__ob__;\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args; // 数组\r\n                break;\r\n            case 'splice': // arr.splice(1,1,xxx)\r\n                inserted = args.slice(2); // 接去掉前两个参数\r\n            default:\r\n                break\r\n        }\r\n        if (inserted) {\r\n            // 对新增的数据再次进行观测\r\n            ob.observeArray(inserted)\r\n        }\r\n        let result = oldArrayPrototype[method].call(this, ...args)\r\n        ob.dep.notify()\r\n        return result\r\n    }\r\n})\r\nexport default arrayPrototype\r\n\r\n","let did = 0\r\n\r\n// 收集 watcher\r\nclass Dep {\r\n  constructor() {\r\n    this.id = did++\r\n    this.watchers = []\r\n  }\r\n  depend() { // watcher 和 dep 是一个多对多的关系\r\n    Dep.target.addDep(this) // 让 watcher 去记录 dep\r\n  }\r\n  addWatcher (watcher) {\r\n    this.watchers.push(watcher)\r\n  }\r\n  removeWatcher(watcher) {\r\n    if (this.watchers.length) {\r\n      const index = this.watchers.indexOf(watcher)\r\n      if (index > -1) {\r\n        return this.watchers.splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n  notify () {\r\n    this.watchers.forEach(watcher => watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null // 描述当前watcher是谁的\r\nconst stack = []  // 存放 updateCompent 与 用户 watch 的 watcher\r\nexport function pushTarget(watcher) {\r\n  stack.push(watcher)\r\n  Dep.target = watcher\r\n}\r\nexport function popTarget(){\r\n  stack.pop() // 删除最后一个项\r\n  Dep.target = stack[stack.length - 1]\r\n}\r\n\r\nexport default Dep","import arrayPrototype from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    // 如果是数组的话也是用defineProperty会浪费很多性能 很少用户会通过arr[878] = 123\r\n    // vue3中的polyfill 直接就给数组做代理了\r\n    // 改写数组的方法，如果用户调用了可以改写数组方法的api 那么我就去劫持这个方法\r\n    // 变异方法 push pop shift unshift reverse sort splice\r\n\r\n    this.dep = new Dep(); // 给所有的对象都增加一个dep, 后续我们会给对象增添新的属性也期望能实现更新\r\n    Object.defineProperty(data, \"__ob__\", {\r\n      value: this,\r\n      enumerable: false,\r\n    });\r\n    // 如果有__ob__属性 说明被观测过了\r\n    // 修改数组的索引和长度是无法更新视图的\r\n    if (Array.isArray(data)) {\r\n      // 需要重写这7个方法\r\n      data.__proto__ = arrayPrototype;\r\n      // 直接将属性赋值给这个对象\r\n      // 如果数组里面放的是对象类型 我期望他也会被变成响应式的\r\n      this.observeArray(data);\r\n    } else {\r\n      this.walk(data);\r\n    }\r\n  }\r\n  observeArray(data) {\r\n    data.forEach((item) => observe(item)); //如果是对象我才进行观测了\r\n  }\r\n  walk(data) {\r\n    // 循环对象 尽量不用for in （会遍历原型链）\r\n    let keys = Object.keys(data); // [0,1,2]\r\n    keys.forEach((key) => {\r\n      //没有重写数组里的每一项\r\n      defineReactive(data, key, data[key]);\r\n    });\r\n  }\r\n}\r\n\r\nfunction dependArray(value) {\r\n  for (let i = 0; i < value.length; i++) {\r\n    let temp = value[i];\r\n    temp.__ob__ && temp.__ob__.dep.depend(); // 让数组中的对象类型做依赖收集  [[[]]]\r\n    if (Array.isArray(temp)) {\r\n      dependArray(temp);\r\n    }\r\n  }\r\n}\r\n\r\n// 性能不好的原因在于 所有的属性都被重新定义了一遍\r\n// 一上来需要将对象深度代理 性能差\r\nfunction defineReactive(data, key, value) {\r\n  //  闭包\r\n  // 属性会全部被重写增加了get和set\r\n  let dep = new Dep();\r\n  let childOb = observe(value); // 递归代理属性\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // vm.xxx\r\n      if (Dep.target) {\r\n        dep.depend(); // 依赖收集 要将属性收集对应的 watcher\r\n        if (childOb) {\r\n          childOb.dep.depend(); // 让数组和对象也记录一下渲染 watcher\r\n          if (Array.isArray(value)) {\r\n            dependArray(value);\r\n          }\r\n        }\r\n      }\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      // vm.xxx = {a:1} 赋值一个对象的话 也可以实现响应式数据\r\n      if (newValue === value) return;\r\n      childOb = observe(newValue);\r\n      value = newValue;\r\n      dep.notify(); // 通知依赖的watcher去重新渲染\r\n    },\r\n  });\r\n}\r\nexport function observe(data) {\r\n  if (typeof data !== \"object\" || data == null) {\r\n    return; // 如果不是对象类型，那么不要做任何处理\r\n  }\r\n  if (data.__ob__) {\r\n    // 说明这个属性已经被代理过了\r\n    return data;\r\n  }\r\n\r\n  // 我稍后要区分 如果一个对象已经被观测了，就不要再次被观测了\r\n  // __ob__ 标识是否有被观测过\r\n\r\n  return new Observer(data);\r\n}\r\n\r\n// 每个类头有一个prototype 指向了一个公共的空间\r\n// 每个实例可以通过__proto__ 找到所属类的prototype对应的内容\r\n\r\n// 1.在Vue2中对象的响应式原理，就是给每个属性增加get和set，而且是递归操作 （用户在写代码的时候尽量不要把所有的属性都放在data中，层次尽可能不要太深）, 赋值一个新对象也会被变成响应式的\r\n// 2.数组没有使用defineProperty 采用的是函数劫持创造一个新的原型重写了这个原型的7个方法，用户在调用的时候采用的是这7个方法。我们增加了逻辑如果是新增的数据会再次被劫持 。 最终调用数组的原有方法 （注意数字的索引和长度没有被监控）  数组中对象类型会被进行响应式处理\r\n","let callbacks = []\r\nlet waiting = false\r\nfunction flushCallbacks(){\r\n  waiting = false; \r\n  // 默认第一次会将两次的nextTick 都维护到callbacks中 [用户的，页面渲染的]\r\n  let cbs = callbacks.slice(0);\r\n  callbacks = [];\r\n  cbs.forEach(cb=>cb());\r\n}\r\n\r\n// 异步任务分为 两种 宏任务、微任务\r\n// 宏任务 setTimeout setImmediate(ie下支持性能优于setTimeout)\r\n// 微任务 promise.then mutationObserver\r\n// vue在更新的时候希望尽快的更新页面 promise.then  mutationObserver  setImmediate setTimeout\r\n// vue3不在考虑兼容性问题了 所以后续vue3中直接使用promise.then\r\n\r\nlet timeFunc\r\nif (typeof Promise !== 'undefined') {\r\n  let p = Promise.resolve()\r\n  timeFunc = () => {\r\n    p.then(flushCallbacks)\r\n  }\r\n} else if (typeof MutationObserver !== 'undefined') {\r\n  let observer = new MutationObserver(flushCallbacks) // mutationObserver放的回调是异步执行的\r\n  let textNode = document.createTextNode(1) // 文本节点内容先是 1\r\n  observer.observe(textNode,{ characterData: true })\r\n  timeFunc = () => {\r\n    textNode.textContent = 2 // 改成了2  就会触发更新了\r\n  }\r\n} else if (typeof setImmediate !== 'undefined') {\r\n  timeFunc = () => {\r\n    setImmediate(flushCallbacks)\r\n  }\r\n} else {\r\n  timeFunc = () => {\r\n    setTimeout(flushCallbacks, 0)\r\n  }\r\n}\r\n\r\nexport function nextTick(cb) {\r\n  callbacks.push(cb)\r\n  if (!waiting) {\r\n    waiting = true\r\n    timeFunc()\r\n  }\r\n}","import { nextTick } from \"../utils/nextTick\"\r\nlet queue = []\r\nlet has = {}\r\nlet pending = false\r\n\r\nfunction flushSchedularQueue() {\r\n  queue.forEach(Watcher => Watcher.run())\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\n\r\nexport function queueWatcher(watcher) {\r\n  let id = watcher.id\r\n  if (has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    if (!pending) {\r\n      nextTick(() => { // 万一一个属性 对应多个更新，那么可能会开启多个定时器\r\n        flushSchedularQueue() // 批处理操作 ， 防抖\r\n      })\r\n      pending = true\r\n    }\r\n  }\r\n}","import Dep, { pushTarget, popTarget } from './dep'\r\nimport { queueWatcher } from './schedular'\r\nlet wid = 0\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, cb, options) {\r\n    this.vm = vm\r\n    this.exprOrFn = exprOrFn\r\n    this.cb = cb\r\n    this.options = options\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    this.id = wid++\r\n    this.lazy = !!options.lazy   // lazy属性是用来标识默认是否调用函数 (computed)\r\n    this.dirty = this.lazy       // dirty属性是用来做缓存的\r\n\r\n    this.user = !!options.user   // 如果是用户watcher会多一个属性 user:true\r\n    \r\n    // 如果给的是一个字符串， 需要去通过字符串取值\r\n    if (typeof exprOrFn == 'function') {\r\n      this.getter = exprOrFn // updateComponent\r\n    } else {\r\n      this.getter = function () { // user watch 获取监听变量的值\r\n        let path = exprOrFn.split('.')\r\n        return path.reduce((vm, current) => {\r\n          vm = vm[current] // 触发getter  执行 dep.depend()  给  dep.watchers 添加一个 watcher \r\n          return vm\r\n        }, vm)\r\n      }\r\n    }\r\n\r\n    this.value = this.lazy ? undefined : this.get() // 实现页面的渲染\r\n  }\r\n\r\n  get() {\r\n    // 为什么要加 pushTarget 与 popTarget 其实就是因为 computed 执行 get 方法时里面来触发了其他响应式变量的get\r\n    // \r\n    pushTarget(this) // 收集各种 watcher （updateComponent, watch, computed）\r\n    const value =  this.getter.call(this.vm); // 去实例中取值  触发getter\r\n    popTarget()\r\n\r\n    return value\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id\r\n    if (!this.depsId.has(id)) {\r\n      this.deps.push(dep)\r\n      this.depsId.add(id)\r\n      dep.addWatcher(this)\r\n    }\r\n  }\r\n  update() {\r\n    if(this.lazy){ // 是计算属性watcher不需要走渲染\r\n      this.dirty = true\r\n    } else {       // 渲染用户 watcher\r\n      queueWatcher(this)\r\n    }\r\n  }\r\n  run() {\r\n    // 稍后会触发run方法, 找到对应的回调让回调执行传入新值和老值\r\n    let newValue = this.get() // 获取最新的状态\r\n    let oldValue = this.value // 上次保留的老值\r\n    this.value = newValue     // 用新值作为老的值\r\n    \r\n    if (this.user) { // 用户 watch 回调， 参数：(新值， 老值)\r\n      this.cb.call(this.vm, newValue, oldValue)\r\n    }\r\n  }\r\n\r\n  evaluate() {\r\n    this.value = this.get()\r\n    this.dirty = false\r\n  }\r\n  depend() {\r\n    let i = this.deps.length\r\n    while (i--) {\r\n      this.deps[i].depend()\r\n    }\r\n  }\r\n\r\n  teardown() {\r\n    // 1. 删除这个 watchers\r\n    const _watchers = this.vm._watchers\r\n    if (_watchers.length) {\r\n      const index = _watchers.indexOf(this)\r\n      if (index > -1) {\r\n        return _watchers.splice(index, 1)\r\n      }\r\n    }\r\n\r\n    // 2. 删除所有 dep 内的这个 watchers\r\n    let i = this.deps.length\r\n    while (i--) {\r\n      this.deps[i].removeWatcher(this)\r\n    }\r\n  }\r\n}\r\n\r\n// watcher 与 dep 多对多关系，一个属性对应多个 watcher, 一个 watcher 对应多个 dep\r\n\r\nexport default Watcher","import { observe } from \"./observe/index\";\r\nimport Watcher from \"./observe/watcher\";\r\nimport Dep, { pushTarget } from \"./observe/dep\";\r\n\r\nexport function initState(vm) {\r\n  const options = vm.$options;\r\n\r\n  // 数据响应式\r\n  if (options.data) {\r\n    initData(vm);\r\n  }\r\n\r\n  // computed 响应式\r\n  if (options.computed) {\r\n    initComputed(vm);\r\n  }\r\n\r\n  // watcher 监听\r\n  if (options.watch) {\r\n    initWatch(vm);\r\n  }\r\n}\r\n\r\n\r\nfunction proxy(vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key];\r\n    },\r\n    set(newValue) {\r\n      vm[source][key] = newValue;\r\n    },\r\n  });\r\n}\r\n\r\n/********* data 数据响应式 start *********/\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  // 如果是函数就拿到函数的返回值 否则就直接采用data作为数据源\r\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\r\n\r\n  // 属性劫持 采用defineProperty将所有的属性进行劫持\r\n\r\n  // 我期望用户可以直接通过 vm.xxx 获取值， 也可以这样取值 vm._data.xxx\r\n  for (let key in data) {\r\n    proxy(vm, \"_data\", key);\r\n  }\r\n  observe(data);\r\n}\r\n/********* data 数据响应式 end *********/\r\n\r\n\r\n\r\n/********* computed 计算属性 start *********/\r\nfunction initComputed(vm) {\r\n  const computed = vm.$options.computed\r\n  const watchers = vm._computedWatchers = {} // 存储所有的 component的 watcher\r\n  for (const key in computed) {\r\n    const userDef = computed[key]\r\n    const getter = typeof userDef === 'function' ? userDef : userDef.get\r\n    watchers[key] = new Watcher(vm, getter, () => {}, { lazy: true })\r\n    defineComputed(vm, key)\r\n  }\r\n}\r\nfunction defineComputed(vm, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get: createComputedGetter(key) // 改了重新计算， 没改取缓存\r\n  })\r\n}\r\nfunction createComputedGetter(key) {\r\n  return function() {\r\n    const watcher = this._computedWatchers[key]\r\n    if (watcher.dirty) { // 如果dirty:true就重新计算，否则就不算了 把以前的值返回\r\n      watcher.evaluate() // 会调用用户定义的方法将返回值返回,此时dirty为false，并且用户的返回值存放到了watcher.value上\r\n    }\r\n    // 在求值的过程中 stack = [渲染watcher，计算属性watcher] Dep.target = 计算属性watcher\r\n    // 当evaluate执行完毕后 stack = [渲染watcher]  Dep.target  = 渲染watcher\r\n    // 计算属性是一个watcher  渲染是一个watcher\r\n    \r\n    if (Dep.target) { // 让计算属性watcher对应的两个dep 记录渲染watcher即可\r\n      watcher.depend()\r\n    }\r\n    return watcher.value\r\n  }\r\n}\r\n/********* computed 计算属性 end *********/\r\n\r\n\r\n\r\n\r\n/********* watch 监听 start *********/\r\nfunction initWatch(vm) {\r\n  const watch = vm.$options.watch;\r\n  for (const key in watch) {\r\n    let handler = watch[key]\r\n    // 对当前属性进行创建watcher，watcher中存放的回调是handler，取数据是从vm上获取\r\n    createWatcher(vm, key, handler)\r\n  }\r\n}\r\nfunction createWatcher(vm, key, handler) {\r\n  // handler 可以是对象\r\n  let options\r\n  if (typeof handler === 'object' && handler !== null) {\r\n    options = handler\r\n    handler = handler.handler\r\n  }\r\n  // 你可以判断如果handler 是一个字符串 可以采用实例上的方法\r\n  if (typeof handler === 'string') {\r\n    handler = vm[key]\r\n  }\r\n  return vm.$watch(key, handler, options) // (监听的变量名, 执行发函数, 监听配置)\r\n}\r\nexport function stateMixin(Vue) {\r\n  Vue.prototype.$watch = function(key, handler, options = {}) {\r\n    const vm = this\r\n    options.user = true\r\n    const watcher = new Watcher(vm, key, handler, options)\r\n    if (options.immediate) {\r\n      handler.call(vm, watcher.value) // watch监听 第一次就触发\r\n    }\r\n\r\n    return function unwatchFn () {\r\n      watcher.teardown()\r\n    }\r\n  }\r\n}\r\n/********* watch 监听 end *********/\r\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 用来描述标签的\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的  捕获的是结束标签的标签名\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的  分组1 拿到的是属性名  , 分组3 ，4， 5 拿到的是key对应的值\r\n\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的    />    >   \r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配双花括号中间单的内容\r\n\r\nfunction parserHTML(html) {\r\n  function advance(n) {\r\n    html = html.substring(n) // 每次根据传入的长度截取html\r\n    console.log(\"html 剩下\", html)\r\n  }\r\n\r\n  // 树的操作 ，需要根据开始标签和结束标签产生一个树\r\n  let root\r\n  // 如何创建树的父子关系\r\n  let stack = []\r\n\r\n  function createASTElement(tagName, attrs) {\r\n    return {\r\n      tag: tagName,\r\n      attrs,\r\n      children: [],\r\n      parent: null,\r\n      type: 1\r\n    }\r\n  }\r\n\r\n  // 开始标签进栈 （先进后出原理）\r\n  function start(tagName, attrs) {\r\n    let element = createASTElement(tagName, attrs)\r\n    if (root == null) {\r\n      root = element\r\n    }\r\n    let parent = stack[stack.length - 1] // 取到栈中的最后一个\r\n    if (parent) {\r\n      element.parent = parent       // 让这个元素记住自己的父亲是谁\r\n      parent.children.push(element) // 让父亲记住儿子是谁\r\n    }\r\n    stack.push(element) //入栈\r\n  }\r\n\r\n  // 结束标签出栈\r\n  function end(tagName) {\r\n    stack.pop() //出栈\r\n  }\r\n\r\n  // 处理标签内容\r\n  function chars(text) {\r\n    text = text.replace(/\\s/g, '')\r\n    if (text) {\r\n      let parent = stack[stack.length - 1]\r\n      parent.children.push({ // 增加一个子元素\r\n        type: 3, // 类型 3 表示文本\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  //  ast 描述的是语法本身 ，语法中没有的，不会被描述出来  虚拟dom 是描述真实dom的可以自己增添属性\r\n  while (html) {\r\n    // 1. 处理开始标签 （就是处理 <div id=\"app\">{{name}}</div>  的 <div id=\"app\"> 部分）\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag(); // 解析开始标签  {tagName:'div',attrs:[{name:\"id\",value:\"app\"}]}\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n\r\n      // 3. 处理结束标签 （就是处理 <div id=\"app\">{{name}}</div>  的 </div> 部分）\r\n      let matches\r\n      if (matches = html.match(endTag)) {\r\n        end(matches[1])\r\n        advance(matches[0].length)\r\n        continue\r\n      }\r\n    }\r\n\r\n    // 2. 处理标签内容 （就是处理 <div id=\"app\">{{name}}</div> 的 {{name}} 部分）\r\n    let text\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length) // html 删去 text， 处理一点删一点\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n\r\n  function parseStartTag() {\r\n    const matches = html.match(startTagOpen) // 获取标签头 <div id=\"app\">{{name}}</div> 的 <div 部分\r\n    if (matches) {\r\n      const match = {\r\n        tagName: matches[1],\r\n        attrs: []\r\n      }\r\n      advance(matches[0].length) // 删除html前面匹配到的标签名字符串\r\n      let end, attr\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        // while循环取属性 直到取完\r\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true })\r\n        advance(attr[0].length) // 取到一个属性删除一个\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  return root\r\n}\r\n\r\n// 参数拼接成对象\r\nfunction genProps(attrs) {\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i]\r\n    if (attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').reduce((memo, current) => {\r\n        let [key, value] = current.split(':')\r\n        memo[key] = value\r\n        return memo\r\n      }, obj)\r\n      attr.value = obj // 这里是样式对象 例：{color:red,background:blue}\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0,-1)}}` // 删除最后的 ,\r\n}\r\n\r\nfunction gen(node) {\r\n  if (node.type === 1) {  // 是节点\r\n    return genCode(node)\r\n  } else {\r\n    let text = node.text\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})` // 不带表达式的\r\n    } else {\r\n      let tokens = []\r\n      let match\r\n      // exec 遇到全局匹配会有 lastIndex 问题 每次匹配前需要将lastIndex 置为 0\r\n      let startIndex = defaultTagRE.lastIndex = 0\r\n      while (match = defaultTagRE.exec(text)) {\r\n        let endIndex = match.index // 匹配到索引\r\n        if (endIndex > startIndex) {\r\n          tokens.push(JSON.stringify(text.slice(startIndex, endIndex)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        startIndex = endIndex + match[0].length\r\n      }\r\n      if (startIndex < text.length) { // 最后的尾巴放进去\r\n        tokens.push(JSON.stringify(text.slice(startIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})` // 最后将动态数据 和非动态的拼接在一起\r\n    }\r\n  }\r\n}\r\n\r\nfunction genChildren(ast) {\r\n  const children = ast.children\r\n  return children.map(child => gen(child)).join(',') // 孩子 , 拼接\r\n}\r\n\r\nfunction genCode(ast) {\r\n  let code\r\n  code = `_c(\"${ast.tag}\", ${\r\n    ast.attrs.length ? genProps(ast.attrs) : 'undefined'\r\n  }${\r\n    ast.children ? (',' + genChildren(ast)) : '' // 后面的参数都是孩子\r\n  })`\r\n\r\n  return code\r\n}\r\n\r\nexport function compileToFunction(template) {\r\n  let ast = parserHTML(template)\r\n  console.log(\"ast =\", ast)\r\n\r\n  let code = genCode(ast);\r\n  console.log(\"code =\", code)\r\n\r\n  const render = new Function(`with(this){return ${code}}`); // 将字符串变成了函数\r\n  return render\r\n}","export function createElement(vm, tag, data = {}, ...children) {\r\n    // 可能要创造组件的虚拟节点\r\n    if (isReveredTag(tag)) {\r\n        // 创建元素的虚拟节点\r\n        return vnode(vm, tag, data, children, data.key, null)\r\n    } else {\r\n        // 创造组件的虚拟节点 ， 组件需要找到组件的模板去进行渲染\r\n        let Ctor = vm.$options.components[tag] // 可能是对象 也有可能是一个类\r\n        // 稍后我们会初始化组件 需要组件的构造函数\r\n        return createComponent(vm, tag, data, children, data.key, Ctor);\r\n    }\r\n}\r\n\r\nconst init = (vnode) => {\r\n    const child = vnode.componentInstance = new vnode.componentOptions.Ctor({}) // 放插槽属性\r\n    child.$mount()\r\n}\r\n\r\nfunction  isReveredTag(tag) {\r\n    const tagList = ['a', 'div', 'img', 'button', 'input', 'p', 'span'];\r\n    return tagList.includes(tag)\r\n}\r\n\r\nfunction createComponent(vm, tag, data, children, key, Ctor) {\r\n    if (typeof Ctor === 'object' && Ctor !== null) {\r\n        const VueCtor = vm.$options._base\r\n        Ctor = VueCtor.extend(Ctor)\r\n    }\r\n    data.hook = { // 稍后我们通过虚拟节点创造真实节点的时候 ，就调用这个init方法\r\n        init\r\n    }\r\n    return vnode(vm, tag, data, undefined, key, undefined, { Ctor, children });\r\n}\r\n\r\nexport function createTextNode(vm,text) {\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\n\r\nfunction vnode(vm,tag,data,children,key,text,componentOptions){\r\n    return {\r\n        vm,\r\n        tag,\r\n        data,\r\n        children,\r\n        key,\r\n        text,\r\n        componentOptions\r\n        // ...\r\n    }\r\n}","export function patch(oldVnode,vnode){     // oldVnode 可能是后续做虚拟节点的时候 是两个虚拟节点的比较\r\n  if (!oldVnode) { // 这是组件的挂载\r\n    return createElm(vnode); // 创造了组件的真实节点\r\n  }\r\n  console.log(\"oldVnode\", oldVnode, \"vnode\", vnode)\r\n  const isRealElement = oldVnode.nodeType\r\n  if(isRealElement){ // 如果有 说明他是一个 dom 元素 (直接挂载 不需要 diff)\r\n    const oldElm = oldVnode\r\n    // 需要获取父节点 将当前节点的下一个元素作为参照物 将他插入，之后删除老节点\r\n    const parentNode = oldElm.parentNode\r\n    let el = createElm(vnode); // 根据虚拟节点\r\n    parentNode.insertBefore(el,oldElm.nextSibling) // nextSibling: 父节点的 childNodes 列表中紧跟在其后面的节点\r\n    parentNode.removeChild(oldElm)\r\n    return el\r\n  } else {\r\n    // diff算法\r\n    patchVnode(oldVnode, vnode);\r\n    return vnode.el\r\n  }\r\n}\r\n\r\nfunction patchVnode(oldVnode, vnode) {\r\n  // case1: 前后两个虚拟节点不是相同节点直接替换掉即可\r\n  if (!isSameVnode(oldVnode, vnode)) {\r\n    return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\r\n  }\r\n\r\n  // 标签一样我们就复用节点\r\n  let el = vnode.el = oldVnode.el\r\n\r\n  // case2：两个元素虚拟节点都是文本的情况下 用新文本换掉老的文本即可\r\n  if (!oldVnode.tag) { // 是文本\r\n    if (oldVnode.text !== vnode.text) {\r\n      return el.textContent = vnode.text\r\n    }\r\n  }\r\n\r\n  // case3: 两个都是标签 比较属性\r\n  updateProperties(vnode, oldVnode.data)\r\n\r\n  // case4: 比较儿子节点\r\n  let oldChildren = oldVnode.children || []\r\n  let newChildren = vnode.children || []\r\n\r\n  // (1). 两方都有儿子 \r\n  if (oldChildren.length > 0 && newChildren.length > 0) {\r\n    // diff算法是一层层的比较 不涉及到跨级比较\r\n    updateChildren(el, oldChildren, newChildren)\r\n  }\r\n  // (2). 一方有儿子 一方没儿子 \r\n  else if (newChildren.length > 0) {\r\n    for (let i = 0; i < newChildren.length; i++) {\r\n      el.appendChild(createElm(newChildren[i]))\r\n    }\r\n  } else if (oldChildren.length > 0) {\r\n    el.innerHTML = '' // 清空子节点\r\n  }\r\n}\r\n\r\n// 是否是同一元素\r\nfunction isSameVnode(n1, n2) {\r\n  return n1.tag == n2.tag && n1.key === n2.key\r\n}\r\n\r\nfunction  createComponent(vnode) {\r\n  let i = vnode.data\r\n  if ((i = i.hook) && (i = i.init)) {\r\n    i(vnode) // 去调用组件的初始化方法，进行组件的初始化操作\r\n  }\r\n  if (vnode.componentInstance) {\r\n    return true\r\n  }\r\n  return false // 如果没有init则是一个普通的元素\r\n}\r\n\r\nexport function createElm(vnode) {\r\n  let { tag, data, children, text } = vnode\r\n  if(typeof tag === 'string'){                // 元素\r\n    if (createComponent(vnode)) {\r\n      return vnode.componentInstance.$el      // 返回组件对应的模板渲染后的dom元素\r\n    }\r\n    vnode.el = document.createElement(tag)    // 后续我们需要diff算法 拿虚拟节点比对后更新dom\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createElm(child))  // 递归渲染\r\n    })\r\n\r\n    // 样式类名....\r\n    updateProperties(vnode)\r\n  }else{ // 文本\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}\r\n\r\n// 更新节点的 style 与 props\r\nfunction updateProperties(vnode, oldProps = {}) {\r\n  let newProps = vnode.data || {}\r\n  // 老的props \r\n  // 属性的diff算法\r\n  let el = vnode.el\r\n  // 比较sytle 特殊一些 需要看下样式\r\n  let oldStyle = oldProps.style || {}\r\n  let newStyle = newProps.style || {}\r\n  for (let key in oldStyle) {\r\n    if (!(key in newStyle)) {\r\n      el.style[key] = ''\r\n    }\r\n  }\r\n  for (let key in oldProps) {\r\n    if (!(key in newProps)) {\r\n      el.removeAttribute(key)\r\n    }\r\n  }\r\n  for (let key in newProps) {\r\n    if (key === 'style') {\r\n      for (let styleKey in newProps[key]) {\r\n        el.style[styleKey] = newProps[key][styleKey]\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = newProps[key]\r\n    } else {\r\n      el.setAttribute(key, newProps[key])\r\n    }\r\n  }\r\n}\r\n\r\n\r\n// diff算法采用了双指针的方式进行比对，并且是O(n)\r\nfunction updateChildren(el, oldChildren, newChildren) {\r\n  // vue中创建了4个指针 分别指向 老孩子和新孩子的头尾\r\n  // 分别依次进行比较有一方先比较完毕就结束比较\r\n  let oldStartIndex = 0;\r\n  let oldEndIndex = oldChildren.length - 1;\r\n  let newStartIndex = 0;\r\n  let newEndIndex = newChildren.length - 1;\r\n\r\n  let oldStartVnode = oldChildren[0];\r\n  let oldEndVnode = oldChildren[oldEndIndex];\r\n  let newStartVnode = newChildren[0];\r\n  let newEndVnode = newChildren[newEndIndex];\r\n\r\n  // 有一方比完就停止  儿子的规模变大而变大 O(n)\r\n\r\n  function makeIndexByKey(children) {\r\n    return children.reduce((memo, current, index) => (memo[current.key] = index, memo), {})\r\n  }\r\n  let map = makeIndexByKey(oldChildren)\r\n\r\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n    // 这里在优化dom的常见操作 向前追加 向后追加  尾部移动头部\r\n    // 复用节点\r\n    if (!oldStartVnode) {      // [ C1 C2 null C4 C5 ]  (oldStartIndex = null -> C4)\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n    } else if (!oldEndVnode) { // [ C1 C2 C3 C4 unll ]  (oldEndVnode = null -> C4) \r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n\r\n\r\n      /* \r\n      O1 == N1\r\n      oldChildrens: [O1 O2 O3]\r\n      newChildrens: [N1 N2 N3]\r\n      */\r\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) { // true则: 说明两个元素是同一个元素 要比较属性，和他的儿子\r\n      patchVnode(oldStartVnode, newStartVnode) // 递归比较他们的儿子\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n      newStartVnode = newChildren[++newStartIndex]\r\n\r\n\r\n      // O3 == N3\r\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) {\r\n      patchVnode(oldEndVnode, newEndVnode)\r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n      newEndVnode = newChildren[--newEndIndex]\r\n\r\n      /* \r\n      O3 == N1\r\n      oldChildrens: [O1 O2 O3]\r\n      newChildrens: [N1 N2 N3]\r\n\r\n      childrenElements: [O1 O2 O3] => [O3 O1 O2] // html节点移动\r\n      */\r\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) {\r\n      patchVnode(oldEndVnode, newStartVnode)\r\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el) // oldEndVnode 节点移动到 oldStartVnode 前面\r\n      oldEndVnode = oldChildren[--oldEndIndex]\r\n      newStartVnode = newChildren[++newStartIndex]\r\n\r\n      /* \r\n      O1 == N3\r\n      oldChildrens: [O1 O2 O3]\r\n      newChildrens: [N1 N2 N3]\r\n\r\n      childrenElements: [O1 O2 O3] => [O2 O3 O1]\r\n      */\r\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\r\n      patchVnode(oldStartVnode, newEndVnode);\r\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling) // oldStartVnode 节点移动到 oldEndVnode 后面\r\n      oldStartVnode = oldChildren[++oldStartIndex]\r\n      newEndVnode = newChildren[--newEndIndex]\r\n    }\r\n\r\n    // 会根据key进行diff算法 ， 所以在使用的时候如果列表是可操作的，尽量避开用index作为key\r\n    else {\r\n      // 乱序比对 我们需要尽可能找出能复用的元素出来\r\n      let moveIndex = map[newStartVnode.key]\r\n      if (moveIndex == undefined) {\r\n        // 不用复用直接创建插入即可\r\n        el.insertBefore(createElm(newStartVnode), oldStartVnode.el)\r\n      } else {\r\n        // 有的话直接移动老的节点\r\n        let moveVnode = oldChildren[moveIndex];\r\n        oldChildren[moveIndex] = undefined\r\n        el.insertBefore(moveVnode.el, oldStartVnode.el);\r\n        patchVnode(moveVnode, newStartVnode); // 比属性 比儿子\r\n      }\r\n      newStartVnode = newChildren[++newStartIndex]\r\n    }\r\n  }\r\n\r\n  // 将新增的直接插入 (newChildren 剩下的 vnode 是需要新增的)\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\r\n      let nextEle = newChildren[newEndIndex + 1] == null ? null : newChildren[newEndIndex + 1].el\r\n      // nextEle 可能是一个dom元素 可能是null 是null insertBefore会被变成appendChild\r\n      el.insertBefore(createElm(newChildren[i]), nextEle)\r\n    }\r\n  }\r\n\r\n  // 删除老的多余元素 (oldChildren 剩下的 vnode 是需要删除的)\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n      if (oldChildren[i] !== undefined) {\r\n        el.removeChild(oldChildren[i].el)\r\n      }\r\n    }\r\n  }\r\n}\r\n// Vue3采用了最长递增子序列，找到最长不需要移动的序列，从而减少了移动操作","import { createElement, createTextNode } from \"./vdom/index\"\r\nimport { patch } from \"./vdom/patch\"\r\nimport Watcher from \"./observe/watcher\"\r\n\r\n// 创造对应的虚拟节点 进行渲染\r\nexport function lifeCycleMixin(Vue) {\r\n  Vue.prototype._c = function() { // 生成 vnode\r\n    return createElement(this, ...arguments)\r\n  }\r\n  Vue.prototype._v = function() {\r\n    return createTextNode(this, ...arguments)\r\n  }\r\n  Vue.prototype._s = function(value) { // 将数据转化成字符串 因为使用的变量对应的结果可能是一个对象\r\n    if(typeof value === 'object' && value !== null){\r\n      return JSON.stringify(value)\r\n    }\r\n    return value\r\n  }\r\n  Vue.prototype._render = function() {\r\n    const vm = this;\r\n    const render = vm.$options.render;\r\n    let vnode = render.call(vm); // _c( _s _v)  with(this) 【此处获取属性时被 Watcher 监听】\r\n    console.log(\"vnode =\", vnode)\r\n    return vnode;\r\n  }\r\n  Vue.prototype._update = function(vnode) { // 将虚拟节点变成真实节点\r\n    // 将 vnode 渲染el元素中\r\n    const vm = this;\r\n    const prevVnode = vm._vnode\r\n    if (!prevVnode) {\r\n      vm.$el = patch(vm.$el, vnode) // 可以初始化渲染， 后续更新也走这个patch方法\r\n    } else {\r\n      vm.$el = patch(prevVnode, vnode) // 第二次 patch 都传 vnode\r\n    }\r\n\r\n    vm._vnode = vnode // 存储旧 vnode\r\n  }\r\n}\r\n\r\nexport function callHook(vm, hook){\r\n  const handlers = vm.$options[hook]\r\n  handlers && handlers.forEach(hook => hook.call(vm))\r\n}\r\n\r\n\r\nexport function mountComponent(vm, el) {\r\n  // 实现页面的挂载流程\r\n  vm.$el = el;// 先将 el 挂载到实例上\r\n  callHook(vm,'beforeMount')\r\n  const updateComponent = () => {\r\n    // 需要调用生成的render函数 获取到虚拟节点  -> 生成真实的dom\r\n    vm._update(vm._render());\r\n  }\r\n\r\n  // 添加监听\r\n  new Watcher(vm, updateComponent, ()=>{\r\n    console.log('页面重新渲染 updated')\r\n  }, true)\r\n  // updateComponent(); // 如果稍后数据变化 也调用这个函数重新执行 \r\n  //后续：观察者模式 + 依赖收集 + diff算法\r\n}","export default function initGlobalAPI(Vue) {\r\n  Vue.options = {}\r\n  Vue.options.components = {}; // 用来存放全局组件的\r\n  Vue.options._base = Vue;\r\n  Vue.mixin = function (options) {\r\n    this.options = mergeOptions(this.options, options)\r\n    return this\r\n  }\r\n\r\n  Vue.component = function (id, definition) {\r\n    definition.name = definition.name || id // 只是做一个标识 ， 为了在自己家中可以使用自己 \r\n    definition = this.options._base.extend(definition) // Vue.extend()\r\n    this.options.components[id] = definition\r\n  }\r\n\r\n  // 每次使用组件 都是通过同一个对象生成的实例 Vue.component('id',{})\r\n  Vue.extend = function (extendOptions) {\r\n    const Super = this\r\n    const Sub = function VueComponent(options) { // 后续会new 这个子类，做组件的初始化\r\n      this._init(options)\r\n    }\r\n    Sub.prototype = Object.create(Super.prototype)\r\n    Sub.prototype.constructor = Sub\r\n\r\n    // 由Vue.extend 传入的参数 和 全局的方法做的合并\r\n    Sub.options = mergeOptions(Super.options, extendOptions)\r\n    \r\n    return Sub\r\n  }\r\n}\r\n\r\nconst LIFECYCLE_HOOKS = ['beforeCreate', 'mounted']\r\nconst strats = {}\r\n\r\n// 组件的合并 全局组件会以原型链的方式赋值到我们的组件实例上\r\nstrats.components = (parant, child) => {\r\n  const res = Object.create(parant) // xxx.__proto__ =  全局的组件\r\n  if (child) {\r\n    for (const key in child) {\r\n      res[key] = child[key]\r\n    }\r\n  }\r\n  return res\r\n}\r\n\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n  strats[hook] = function(parentVal, childVal) {\r\n    if (childVal) {\r\n      if (parentVal) {\r\n        return parentVal.concat(childVal)\r\n      } else {\r\n        return [ childVal ]\r\n      }\r\n    } else {\r\n      return parentVal\r\n    }\r\n  }\r\n})\r\n\r\n// 合并两个对象\r\nexport function mergeOptions(parent, child) {\r\n  const options = {}\r\n  for (const key in parent) {\r\n    mergeField(key)\r\n  }\r\n  for (const key in child) {\r\n    if (!(key in parent)) {\r\n      mergeField(key)\r\n    }\r\n  }\r\n\r\n  function mergeField(key) {\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parent[key], child[key])\r\n    } else {\r\n      options[key] = child[key] || parent[key]\r\n    }\r\n  }\r\n\r\n  return options\r\n}","import { initState } from \"./state\";\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { mergeOptions } from \"./globalAPI/index\";\r\n\r\nexport default function initMixin(Vue) {\r\n    Vue.prototype._init = function(options) {\r\n        const vm = this;\r\n        vm.$options = mergeOptions(vm.constructor.options, options) // 所有后续的扩展方法都有一个$options选项可以获取用户的所有选项\r\n        // 对于实例的数据源 props data methods computed watch\r\n        // props data\r\n        callHook(vm,'beforeCreate')\r\n        initState(vm);\r\n        // vue中会判断如果是$开头的属性不会被变成响应式数据\r\n        callHook(vm,'created')\r\n\r\n        // 状态初始化完毕后需要进行页面挂载\r\n        if (vm.$options.el) { // el 属性 和直接调用$mount是一样的\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function(el) {\r\n        const vm = this;\r\n        el = document.querySelector(el);\r\n        const options = vm.$options;\r\n        if (!options.render) {\r\n            let template = options.template;\r\n            if (!template) { // render 和 template 都没有的情况下才获取 outerHTML\r\n                template = el.outerHTML\r\n            }\r\n            // 将template变成render函数\r\n\r\n            // 创建render函数 -》 虚拟dom  -》 渲染真实dom\r\n            console.log(\"html 初始值\", template)\r\n            const render =  compileToFunction(template); // 开始编译\r\n            options.render = render;\r\n        }\r\n        mountComponent(vm,el)\r\n        console.log(\"render =\", options.render.toString())\r\n    }\r\n}","// 整个自己编写的Vue的入口\r\n\r\nimport initMixin from \"./init\"\r\nimport { lifeCycleMixin } from \"./lifecycle\"\r\nimport { nextTick } from \"./utils/nextTick\"\r\nimport initGlobalAPI from \"./globalAPI/index\"\r\nimport { stateMixin } from \"./state\"\r\n\r\n// es6的类 要求所有的扩展都在类的内部来进行扩展\r\n\r\nfunction Vue(options){\r\n    this._init(options);\r\n}\r\ninitMixin(Vue)      // 后续在扩展都可以采用这种方式\r\nstateMixin(Vue)\r\nlifeCycleMixin(Vue) // 给 Vue 实例添加方法\r\ninitGlobalAPI(Vue) // 合并 options\r\n\r\nVue.prototype.$nextTick = nextTick\r\n\r\nexport default Vue"],"names":["oldArrayPrototype","Array","prototype","arrayPrototype","Object","create","methods","forEach","method","inserted","ob","__ob__","args","slice","observeArray","result","call","dep","notify","did","Dep","id","watchers","target","addDep","watcher","push","length","index","indexOf","splice","update","stack","pushTarget","popTarget","pop","Observer","data","defineProperty","value","enumerable","isArray","__proto__","walk","item","observe","keys","key","defineReactive","dependArray","i","temp","depend","childOb","get","set","newValue","callbacks","waiting","flushCallbacks","cbs","cb","timeFunc","Promise","p","resolve","then","MutationObserver","observer","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","nextTick","queue","has","pending","flushSchedularQueue","Watcher","run","queueWatcher","wid","vm","exprOrFn","options","deps","depsId","Set","lazy","dirty","user","getter","path","split","reduce","current","undefined","add","addWatcher","oldValue","_watchers","removeWatcher","initState","$options","initData","computed","initComputed","watch","initWatch","proxy","source","_data","_computedWatchers","userDef","defineComputed","createComputedGetter","evaluate","handler","createWatcher","$watch","stateMixin","Vue","immediate","unwatchFn","teardown","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","parserHTML","html","advance","n","substring","console","log","root","createASTElement","tagName","attrs","tag","children","parent","type","start","element","end","chars","text","replace","textEnd","startTagMatch","parseStartTag","matches","match","attr","name","genProps","str","obj","memo","JSON","stringify","gen","node","genCode","test","tokens","startIndex","lastIndex","exec","endIndex","trim","join","genChildren","ast","map","child","code","compileToFunction","template","render","Function","createElement","isReveredTag","vnode","Ctor","components","createComponent","init","componentInstance","componentOptions","$mount","tagList","includes","VueCtor","_base","extend","hook","patch","oldVnode","createElm","isRealElement","nodeType","oldElm","parentNode","el","insertBefore","nextSibling","removeChild","patchVnode","isSameVnode","replaceChild","updateProperties","oldChildren","newChildren","updateChildren","appendChild","innerHTML","n1","n2","$el","oldProps","newProps","oldStyle","style","newStyle","removeAttribute","styleKey","className","setAttribute","oldStartIndex","oldEndIndex","newStartIndex","newEndIndex","oldStartVnode","oldEndVnode","newStartVnode","newEndVnode","makeIndexByKey","moveIndex","moveVnode","nextEle","lifeCycleMixin","_c","arguments","_v","_s","_render","_update","prevVnode","_vnode","callHook","handlers","mountComponent","updateComponent","initGlobalAPI","mixin","mergeOptions","component","definition","extendOptions","Super","Sub","VueComponent","_init","constructor","LIFECYCLE_HOOKS","strats","parant","res","parentVal","childVal","concat","mergeField","initMixin","querySelector","outerHTML","toString","$nextTick"],"mappings":"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"}